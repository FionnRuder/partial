{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/components/ModalNewDisciplineTeam/index.tsx"],"sourcesContent":["import Modal from '@/components/Modal';\nimport {\n  useCreateTeamMutation,\n  useGetUsersQuery,\n  useGetProgramsQuery,\n  DisciplineTeam\n} from '@/state/api';\nimport React, { useState } from 'react';\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nconst ModalNewDisciplineTeam = ({\n  isOpen,\n  onClose,\n}: Props) => {\n  const { data: users = [], isLoading: usersLoading } = useGetUsersQuery();\n  const { data: programs = [], isLoading: programsLoading } = useGetProgramsQuery();\n  const [createTeam, { isLoading }] = useCreateTeamMutation();\n  \n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [teamManagerUserId, setTeamManagerUserId] = useState(\"\");\n  const [selectedProgramIds, setSelectedProgramIds] = useState<number[]>([]);\n\n  const handleSubmit = async () => {\n    if (!isFormValid()) return;\n\n    const payload: any = {\n      name,\n      description,\n      teamManagerUserId: teamManagerUserId ? parseInt(teamManagerUserId) : undefined,\n      programIds: selectedProgramIds.length > 0 ? selectedProgramIds : undefined,\n    };\n\n    try {\n      await createTeam(payload).unwrap();\n      // Reset form\n      setName(\"\");\n      setDescription(\"\");\n      setTeamManagerUserId(\"\");\n      setSelectedProgramIds([]);\n      onClose(); // close modal on success\n    } catch (err) {\n      console.error(\"Failed to create team:\", err);\n    }\n  };\n\n  const handleProgramToggle = (programId: number) => {\n    setSelectedProgramIds(prev => \n      prev.includes(programId)\n        ? prev.filter(id => id !== programId)\n        : [...prev, programId]\n    );\n  };\n\n  const isFormValid = (): boolean => {\n    return !!name && !!description;\n  };\n\n  const selectStyles =\n    \"mb-4 block w-full rounded border border-gray-300 px-3 py-2 dark:border-dark-tertiary dark:bg-dark-tertiary dark:text-white dark:focus:outline-none\";\n\n  const inputStyles =\n    \"w-full rounded border border-gray-300 p-2 shadow-sm dark:border-dark-tertiary dark:bg-dark-tertiary dark:text-white dark:focus:outline-none\";\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} name={\"Create New Discipline Team\"}>\n      <form\n        className=\"mt-4 space-y-6\"\n        onSubmit={(e) => {\n          e.preventDefault();\n          handleSubmit();\n        }}\n      >\n        <input\n          type=\"text\"\n          className={inputStyles}\n          placeholder=\"Team Name\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n        />\n        \n        <textarea\n          className={inputStyles}\n          placeholder=\"Description\"\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n        />\n\n        <select\n          className={selectStyles}\n          value={teamManagerUserId}\n          onChange={(e) => setTeamManagerUserId(e.target.value)}\n          disabled={usersLoading}\n        >\n          <option value=\"\">Select Team Manager (Optional)</option>\n          {users.map((user) => (\n            <option key={user.id} value={user.id}>\n              {user.name} ({user.username})\n            </option>\n          ))}\n        </select>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n            Assign Programs (Optional):\n          </label>\n          {programsLoading ? (\n            <div className=\"text-sm text-gray-500\">Loading programs...</div>\n          ) : programs.length === 0 ? (\n            <div className=\"text-sm text-gray-500\">No programs available</div>\n          ) : (\n            <div className=\"space-y-2 max-h-48 overflow-y-auto border border-gray-300 dark:border-dark-tertiary rounded p-3\">\n              {programs.map((program) => (\n                <label\n                  key={program.id}\n                  className=\"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 p-2 rounded\"\n                >\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedProgramIds.includes(program.id)}\n                    onChange={() => handleProgramToggle(program.id)}\n                    className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700\"\n                  />\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">\n                    {program.name}\n                  </span>\n                </label>\n              ))}\n            </div>\n          )}\n        </div>\n\n        <button\n          type=\"submit\"\n          className={`focus-offset-2 mt-4 flex w-full justify-center rounded-md border border-transparent bg-blue-primary px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600 ${\n            !isFormValid() || isLoading ? \"cursor-not-allowed opacity-50\" : \"\"\n          }`}\n          disabled={!isFormValid() || isLoading}\n        >\n          {isLoading ? \"Creating Team...\" : \"Create Team\"}\n        </button>\n      </form>\n    </Modal>\n  );\n};\n\nexport default ModalNewDisciplineTeam;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/components/ModalEditDisciplineTeam/index.tsx"],"sourcesContent":["import Modal from '@/components/Modal';\nimport {\n  useEditTeamMutation,\n  useGetUsersQuery,\n  useGetProgramsQuery,\n  DisciplineTeam\n} from '@/state/api';\nimport React, { useEffect, useState } from 'react';\nimport { showApiError, showApiSuccess } from '@/lib/toast';\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n  team: DisciplineTeam | null;\n};\n\nconst ModalEditDisciplineTeam = ({ isOpen, onClose, team }: Props) => {\n  const [editTeam, { isLoading: isSaving }] = useEditTeamMutation();\n  const { data: users = [], isLoading: usersLoading } = useGetUsersQuery();\n  const { data: programs = [], isLoading: programsLoading } = useGetProgramsQuery();\n\n  // form state\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [teamManagerUserId, setTeamManagerUserId] = useState(\"\");\n  const [selectedProgramIds, setSelectedProgramIds] = useState<number[]>([]);\n\n  // Prefill all fields when modal opens\n  useEffect(() => {\n    if (team) {\n      setName(team.name || \"\");\n      setDescription(team.description || \"\");\n      setTeamManagerUserId(team.teamManagerUserId?.toString() || \"\");\n      // Set selected programs from team.programs\n      // team.programs is an array of Program objects (from getTeams response)\n      if (team.programs && Array.isArray(team.programs) && team.programs.length > 0) {\n        // Programs are already flattened in getTeams response\n        setSelectedProgramIds(team.programs.map((p: any) => p.id));\n      } else {\n        setSelectedProgramIds([]);\n      }\n    }\n  }, [team]);\n\n  const isFormValid = (): boolean => {\n    return !!name && !!description;\n  };\n\n  const handleSubmit = async () => {\n    if (!team || !isFormValid()) return;\n\n    const updatedTeam: any = {\n      name,\n      description,\n      teamManagerUserId: teamManagerUserId ? parseInt(teamManagerUserId) : undefined,\n      programIds: selectedProgramIds,\n    };\n\n    try {\n      await editTeam({\n        teamId: team.id,\n        updates: updatedTeam,\n      }).unwrap();\n      showApiSuccess(\"Team updated successfully\");\n      onClose(); // close modal on success\n    } catch (err: any) {\n      console.error(\"Failed to save team:\", err);\n      showApiError(err, \"Failed to save team\");\n    }\n  };\n\n  const handleProgramToggle = (programId: number) => {\n    setSelectedProgramIds(prev => \n      prev.includes(programId)\n        ? prev.filter(id => id !== programId)\n        : [...prev, programId]\n    );\n  };\n\n  const selectStyles =\n    \"mb-4 block w-full rounded border border-gray-300 px-3 py-2 dark:border-dark-tertiary dark:bg-dark-tertiary dark:text-white dark:focus:outline-none\";\n\n  const inputStyles =\n    \"w-full rounded border border-gray-300 p-2 shadow-sm dark:border-dark-tertiary dark:bg-dark-tertiary dark:text-white dark:focus:outline-none\";\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} name={`Edit Discipline Team`}>\n      <form\n        className=\"mt-4 space-y-6\"\n        onSubmit={(e) => {\n          e.preventDefault();\n          handleSubmit();\n        }}\n      >\n        <div>\n          <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n            Team Name:\n          </label>\n          <input\n            type=\"text\"\n            className={inputStyles}\n            placeholder=\"Team Name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n        </div>\n        \n        <div>\n          <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n            Description:\n          </label>\n          <textarea\n            className={inputStyles}\n            placeholder=\"Description\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n          />\n        </div>\n\n        <div>\n          <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n            Team Manager:\n          </label>\n          <select\n            className={selectStyles}\n            value={teamManagerUserId}\n            onChange={(e) => setTeamManagerUserId(e.target.value)}\n            disabled={usersLoading}\n          >\n            <option value=\"\">Select Team Manager (Optional)</option>\n            {users.map((user) => (\n              <option key={user.id} value={user.id}>\n                {user.name} ({user.username})\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n            Assign Programs (Optional):\n          </label>\n          {programsLoading ? (\n            <div className=\"text-sm text-gray-500\">Loading programs...</div>\n          ) : programs.length === 0 ? (\n            <div className=\"text-sm text-gray-500\">No programs available</div>\n          ) : (\n            <div className=\"space-y-2 max-h-48 overflow-y-auto border border-gray-300 dark:border-dark-tertiary rounded p-3\">\n              {programs.map((program) => (\n                <label\n                  key={program.id}\n                  className=\"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 p-2 rounded\"\n                >\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedProgramIds.includes(program.id)}\n                    onChange={() => handleProgramToggle(program.id)}\n                    className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700\"\n                  />\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">\n                    {program.name}\n                  </span>\n                </label>\n              ))}\n            </div>\n          )}\n        </div>\n\n        <button\n          type=\"submit\"\n          className={`focus-offset-2 mt-4 flex w-full justify-center rounded-md border border-transparent bg-blue-primary px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600 ${\n            !isFormValid() || isSaving ? \"cursor-not-allowed opacity-50\" : \"\"\n          }`}\n          disabled={!isFormValid() || isSaving}\n        >\n          {isSaving ? \"Updating Team...\" : \"Update Team\"}\n        </button>\n      </form>\n    </Modal>\n  );\n};\n\nexport default ModalEditDisciplineTeam;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 524, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/components/BurndownChart/index.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useMemo } from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { WorkItem, Status } from \"@/state/api\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  ChartOptions,\r\n} from \"chart.js\";\r\nimport { format, eachDayOfInterval, isAfter, isBefore, isEqual, parseISO } from \"date-fns\";\r\n\r\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\r\n\r\ntype Props = {\r\n  workItems: WorkItem[];\r\n  startDate?: string;\r\n  endDate?: string;\r\n  isDarkMode?: boolean;\r\n};\r\n\r\n// Helper function to parse date string without timezone conversion\r\n// Extracts the date portion (YYYY-MM-DD) and parses it as a local date\r\nconst parseDateOnly = (dateString: string | undefined): Date | null => {\r\n  if (!dateString) return null;\r\n  try {\r\n    // Extract just the date portion (YYYY-MM-DD) from ISO string\r\n    const dateOnly = dateString.split('T')[0];\r\n    // Parse as local date to avoid timezone conversion\r\n    const [year, month, day] = dateOnly.split('-').map(Number);\r\n    if (isNaN(year) || isNaN(month) || isNaN(day)) return null;\r\n    return new Date(year, month - 1, day);\r\n  } catch {\r\n    return null;\r\n  }\r\n};\r\n\r\nconst BurndownChart: React.FC<Props> = ({ workItems, startDate, endDate, isDarkMode = false }) => {\r\n  const today = new Date();\r\n  // Set today to midnight to avoid timezone issues when comparing\r\n  today.setHours(0, 0, 0, 0);\r\n\r\n  // Determine chart start/end date\r\n  const minDate = useMemo(() => {\r\n    if (startDate) {\r\n      const parsed = parseDateOnly(startDate);\r\n      return parsed || today;\r\n    }\r\n\r\n    const dates = workItems\r\n      .map((w) => parseDateOnly(w.dueDate))\r\n      .concat(workItems.map((w) => parseDateOnly(w.estimatedCompletionDate || w.dueDate)))\r\n      .concat(workItems.map((w) => parseDateOnly(w.actualCompletionDate || w.dueDate)))\r\n      .filter((d): d is Date => d !== null);\r\n    \r\n    return dates.length > 0 \r\n      ? new Date(Math.min(...dates.map((d) => d.getTime())))\r\n      : today;\r\n  }, [workItems, startDate, today]);\r\n\r\n  const maxDate = useMemo(() => {\r\n    // If endDate is explicitly provided, use it\r\n    if (endDate) {\r\n      const parsed = parseDateOnly(endDate);\r\n      return parsed || today;\r\n    }\r\n\r\n    // Collect all dates from work items (dueDate, estimatedCompletionDate, actualCompletionDate)\r\n    const dates = workItems\r\n      .map((w) => parseDateOnly(w.dueDate))\r\n      .concat(workItems.map((w) => parseDateOnly(w.estimatedCompletionDate || w.dueDate)))\r\n      .concat(workItems.map((w) => parseDateOnly(w.actualCompletionDate || w.dueDate)))\r\n      .filter((d): d is Date => d !== null);\r\n    \r\n    // Get the maximum of all dates\r\n    const max = dates.length > 0 \r\n      ? new Date(Math.max(...dates.map((d) => d.getTime())))\r\n      : today;\r\n    \r\n    // Ensure the max is at least today\r\n    return isAfter(max, today) ? max : today;\r\n  }, [workItems, endDate, today]);\r\n\r\n  const dates = eachDayOfInterval({ start: minDate, end: maxDate }).map((d) => format(d, \"yyyy-MM-dd\"));\r\n\r\n  // Get total number of work items\r\n  const totalItems = workItems.length;\r\n\r\n  // Get the latest due date for baseline calculation\r\n  const latestDueDate = useMemo(() => {\r\n    const dueDates = workItems\r\n      .map((w) => parseDateOnly(w.dueDate))\r\n      .filter((d): d is Date => d !== null);\r\n    return dueDates.length > 0 ? new Date(Math.max(...dueDates.map((d) => d.getTime()))) : maxDate;\r\n  }, [workItems, maxDate]);\r\n\r\n  // Helper function to count remaining items for actuals (based on actual completion date or status)\r\n  const getActualsRemaining = (dateStr: string): number => {\r\n    const currentDate = parseDateOnly(dateStr);\r\n    if (!currentDate) return workItems.length;\r\n    \r\n    return workItems.filter((w) => {\r\n      // If item has an actualCompletionDate, use it for precise timing\r\n      if (w.actualCompletionDate) {\r\n        const completionDate = parseDateOnly(w.actualCompletionDate);\r\n        if (!completionDate) return true; // No valid date means still remaining\r\n        // Item is remaining if completion date is after current date\r\n        return isAfter(completionDate, currentDate);\r\n      }\r\n      \r\n      // If no actualCompletionDate, check status\r\n      // If status is Completed, we don't know when it was completed, so we can't accurately track it\r\n      // For items without completion date but marked as completed, we'll assume they're completed\r\n      // This is a limitation - ideally all completed items should have actualCompletionDate\r\n      if (w.status === Status.Completed) {\r\n        // Without a date, we can't know when it was completed, so we'll treat it as completed\r\n        // This means it won't be counted as remaining\r\n        return false;\r\n      }\r\n      \r\n      // Item is still remaining if not completed\r\n      return true;\r\n    }).length;\r\n  };\r\n\r\n  // Helper function to count remaining items for forecast (based on estimated completion date)\r\n  const getForecastRemaining = (dateStr: string): number => {\r\n    const currentDate = parseDateOnly(dateStr);\r\n    if (!currentDate) return workItems.length;\r\n    \r\n    return workItems.filter((w) => {\r\n      const estimatedDate = w.estimatedCompletionDate \r\n        ? parseDateOnly(w.estimatedCompletionDate)\r\n        : w.dueDate \r\n        ? parseDateOnly(w.dueDate)\r\n        : null;\r\n      \r\n      if (!estimatedDate) return true; // No date means still remaining\r\n      \r\n      // Item is remaining if estimated completion date is after current date\r\n      return isAfter(estimatedDate, currentDate);\r\n    }).length;\r\n  };\r\n\r\n  // Calculate baseline: count items with due dates after current date\r\n  // This represents the planned burndown - items remaining based on their due dates\r\n  const baselineLine = dates.map((d) => {\r\n    const currentDate = parseDateOnly(d);\r\n    if (!currentDate) return workItems.length;\r\n    \r\n    return workItems.filter((w) => {\r\n      const dueDate = w.dueDate ? parseDateOnly(w.dueDate) : null;\r\n      if (!dueDate) return true; // Items without due dates are always remaining\r\n      // Item is remaining if due date is after current date\r\n      return isAfter(dueDate, currentDate);\r\n    }).length;\r\n  });\r\n\r\n  // Calculate forecast line: items remaining based on estimated completion dates\r\n  const forecastLine = dates.map((d) => getForecastRemaining(d));\r\n\r\n  // Calculate actuals line: items remaining based on actual completion dates (only up to today)\r\n  const actualsLine = dates.map((d) => {\r\n    const currentDate = parseDateOnly(d);\r\n    if (!currentDate) return null;\r\n    // Only show actuals up to today\r\n    if (isAfter(currentDate, today)) {\r\n      return null;\r\n    }\r\n    return getActualsRemaining(d);\r\n  });\r\n\r\n  const data = {\r\n    labels: dates,\r\n    datasets: [\r\n      {\r\n        label: \"Actuals (Remaining)\",\r\n        data: actualsLine,\r\n        borderColor: \"#66CDAA\",\r\n        backgroundColor: \"rgba(102,205,170,0.2)\",\r\n        fill: true,\r\n        spanGaps: false, // prevents the line from connecting beyond nulls\r\n      },\r\n      {\r\n        label: \"Baseline (Due Date)\",\r\n        data: baselineLine,\r\n        borderColor: \"#FF9500\",\r\n        backgroundColor: \"rgba(255,149,0,0.2)\",\r\n        fill: true,\r\n      },\r\n      {\r\n        label: \"Forecast (Estimated Completion)\",\r\n        data: forecastLine,\r\n        borderColor: \"#6FA8DC\",\r\n        backgroundColor: \"rgba(111, 168, 220, 0.2)\",\r\n        fill: true,\r\n      },\r\n    ],\r\n  };\r\n\r\n    const textColor = isDarkMode ? \"#FFFFFF\" : \"#000000\";\r\n    const gridColor = isDarkMode ? \"#444\" : \"#CCC\";\r\n\r\n    const options: ChartOptions<\"line\"> = {\r\n        responsive: true,\r\n        plugins: {\r\n            legend: { \r\n            position: \"top\",\r\n            labels: {\r\n                color: textColor, // legend text\r\n                usePointStyle: true,\r\n            },\r\n            },\r\n            title: { \r\n                display: false, \r\n                text: \"Work Item Burndown Chart\",\r\n                color: textColor, // chart title\r\n            },\r\n            tooltip: {\r\n                mode: \"index\",\r\n                intersect: false,\r\n                backgroundColor: isDarkMode ? \"#222\" : \"#fff\",\r\n                titleColor: textColor,\r\n                bodyColor: textColor,\r\n                borderColor: gridColor,\r\n                borderWidth: 1,\r\n                callbacks: {\r\n                    label: function (tooltipItem) {\r\n                        const datasetLabel = tooltipItem.dataset.label || \"\";\r\n                        const value = tooltipItem.raw === null ? \"窶能" : tooltipItem.raw;\r\n                        return `${datasetLabel}: ${value}`;\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        interaction: {\r\n            mode: \"index\",\r\n            intersect: false,\r\n        },\r\n        scales: {\r\n            x: {\r\n                title: { display: false, text: \"Date\", color: textColor },\r\n                ticks: { color: textColor },\r\n                grid: { color: gridColor },\r\n            },\r\n            y: {\r\n                beginAtZero: true,\r\n                title: { display: false, text: \"Remaining Work Items\", color: textColor },\r\n                ticks: { color: textColor },\r\n                grid: { color: gridColor },\r\n            },\r\n        },\r\n    };\r\n\r\n\r\n  return <Line data={data} options={options} />;\r\n};\r\n\r\nexport default BurndownChart;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 818, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/lib/utils.ts"],"sourcesContent":["export const dataGridClassNames =\r\n  \"border border-gray-200 bg-white shadow dark:border-stroke-dark dark:bg-dark-secondary dark:text-gray-200\";\r\n\r\nexport const dataGridSxStyles = (isDarkMode: boolean) => {\r\n  return {\r\n    \"& .MuiDataGrid-columnHeaders\": {\r\n      color: `${isDarkMode ? \"#e5e7eb\" : \"\"}`,\r\n      '& [role=\"row\"] > *': {\r\n        backgroundColor: `${isDarkMode ? \"#1d1f21\" : \"white\"}`,\r\n        borderColor: `${isDarkMode ? \"#2d3135\" : \"\"}`,\r\n      },\r\n    },\r\n    \"& .MuiIconbutton-root\": {\r\n      color: `${isDarkMode ? \"#a3a3a3\" : \"\"}`,\r\n    },\r\n    \"& .MuiTablePagination-root\": {\r\n      color: `${isDarkMode ? \"#a3a3a3\" : \"\"}`,\r\n    },\r\n    \"& .MuiTablePagination-selectIcon\": {\r\n      color: `${isDarkMode ? \"#a3a3a3\" : \"\"}`,\r\n    },\r\n    \"& .MuiDataGrid-cell\": {\r\n      border: \"none\",\r\n    },\r\n    \"& .MuiDataGrid-row\": {\r\n      borderBottom: `1px solid ${isDarkMode ? \"#2d3135\" : \"e5e7eb\"}`,\r\n      \"&:hover\": {\r\n        backgroundColor: `${isDarkMode ? \"#2d3135\" : \"#f3f4f6\"}`,\r\n      },\r\n    },\r\n    \"& .MuiDataGrid-withBorderColor\": {\r\n      borderColor: `${isDarkMode ? \"#2d3135\" : \"e5e7eb\"}`,\r\n    },\r\n  };\r\n};"],"names":[],"mappings":";;;;;;AAAO,MAAM,qBACX;AAEK,MAAM,mBAAmB,CAAC;IAC/B,OAAO;QACL,gCAAgC;YAC9B,OAAO,AAAC,GAA8B,OAA5B,aAAa,YAAY;YACnC,sBAAsB;gBACpB,iBAAiB,AAAC,GAAmC,OAAjC,aAAa,YAAY;gBAC7C,aAAa,AAAC,GAA8B,OAA5B,aAAa,YAAY;YAC3C;QACF;QACA,yBAAyB;YACvB,OAAO,AAAC,GAA8B,OAA5B,aAAa,YAAY;QACrC;QACA,8BAA8B;YAC5B,OAAO,AAAC,GAA8B,OAA5B,aAAa,YAAY;QACrC;QACA,oCAAoC;YAClC,OAAO,AAAC,GAA8B,OAA5B,aAAa,YAAY;QACrC;QACA,uBAAuB;YACrB,QAAQ;QACV;QACA,sBAAsB;YACpB,cAAc,AAAC,aAA8C,OAAlC,aAAa,YAAY;YACpD,WAAW;gBACT,iBAAiB,AAAC,GAAqC,OAAnC,aAAa,YAAY;YAC/C;QACF;QACA,kCAAkC;YAChC,aAAa,AAAC,GAAoC,OAAlC,aAAa,YAAY;QAC3C;IACF;AACF","debugId":null}},
    {"offset": {"line": 864, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/app/teams/page.tsx"],"sourcesContent":["\"use client\";\nimport { useGetTeamsQuery, useGetUsersQuery, useGetWorkItemsQuery, WorkItemType, Priority, WorkItem, Status, useGetProgramsQuery } from \"@/state/api\";\nimport React, { useMemo, useState, useEffect } from \"react\";\nimport { useAppSelector } from \"../redux\";\nimport Header from \"@/components/Header\";\nimport ModalNewDisciplineTeam from \"@/components/ModalNewDisciplineTeam\";\nimport ModalEditDisciplineTeam from \"@/components/ModalEditDisciplineTeam\";\nimport BurndownChart from \"@/components/BurndownChart\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  DataGrid,\n  GridColDef,\n} from \"@mui/x-data-grid\";\nimport { dataGridClassNames, dataGridSxStyles } from \"@/lib/utils\";\nimport {\n  Bar,\n  BarChart,\n  CartesianGrid,\n  Cell,\n  Legend,\n  Pie,\n  PieChart,\n  ResponsiveContainer,\n  Tooltip,\n  XAxis,\n  YAxis,\n} from \"recharts\";\nimport { format } from \"date-fns\";\nimport { PlusSquare, SquarePen } from \"lucide-react\";\n\nconst COLORS = [\"#6FA8DC\", \"#66CDAA\", \"#FF9500\", \"#FF8042\", \"#A28FD0\", \"#FF6384\", \"#36A2EB\"];\n\nconst getStatusColor = (status: Status) => {\n  switch (status) {\n    case Status.ToDo:\n      return \"bg-gray-100 text-gray-800\";\n    case Status.WorkInProgress:\n      return \"bg-blue-100 text-blue-800\";\n    case Status.UnderReview:\n      return \"bg-yellow-100 text-yellow-800\";\n    case Status.Completed:\n      return \"bg-green-100 text-green-800\";\n    default:\n      return \"bg-gray-100 text-gray-800\";\n  }\n};\n\nconst getPriorityColor = (priority: Priority) => {\n  switch (priority) {\n    case Priority.Urgent:\n      return \"bg-red-100 text-red-800\";\n    case Priority.High:\n      return \"bg-orange-100 text-orange-800\";\n    case Priority.Medium:\n      return \"bg-yellow-100 text-yellow-800\";\n    case Priority.Low:\n      return \"bg-green-100 text-green-800\";\n    case Priority.Backlog:\n      return \"bg-gray-100 text-gray-800\";\n    default:\n      return \"bg-gray-100 text-gray-800\";\n  }\n};\n\nconst formatDate = (dateString: string) => {\n  if (!dateString) return \"N/A\";\n  const date = new Date(dateString);\n  return date.toLocaleDateString();\n};\n\nconst workItemColumns: GridColDef<WorkItem>[] = [\n  { \n    field: \"workItemType\", \n    headerName: \"Type\", \n    width: 120,\n    renderCell: (params) => (\n      <span className=\"inline-flex rounded-full bg-purple-100 px-2 text-xs font-semibold leading-5 text-purple-800\">\n        {params.value}\n      </span>\n    ),\n  },\n  { \n    field: \"title\", \n    headerName: \"Title\", \n    minWidth: 200,\n    flex: 1,\n  },\n  { \n    field: \"status\", \n    headerName: \"Status\", \n    width: 140,\n    renderCell: (params) => (\n      <span className={`inline-flex rounded-full px-2 text-xs font-semibold leading-5 ${getStatusColor(params.value)}`}>\n        {params.value}\n      </span>\n    ),\n  },\n  { \n    field: \"priority\", \n    headerName: \"Priority\", \n    width: 110,\n    renderCell: (params) => (\n      <span className={`inline-flex rounded-full px-2 text-xs font-semibold leading-5 ${getPriorityColor(params.value)}`}>\n        {params.value}\n      </span>\n    ),\n  },\n  { \n    field: \"dueDate\", \n    headerName: \"Due Date\",\n    width: 120,\n    renderCell: (params) => {\n      const dateStr = formatDate(params.value);\n      const isPastDue = params.value && new Date(params.value) < new Date();\n      const isNotCompleted = params.row.status !== Status.Completed;\n      const shouldHighlight = isPastDue && isNotCompleted;\n      \n      return (\n        <span className={shouldHighlight ? \"text-red-600 font-semibold\" : \"\"}>\n          {dateStr}\n        </span>\n      );\n    },\n  },\n  { \n    field: \"estimatedCompletionDate\",\n    headerName: \"ECD\",\n    width: 130,\n    renderCell: (params) => {\n      const dateStr = formatDate(params.value);\n      const isPastDue = params.value && new Date(params.value) < new Date();\n      const isNotCompleted = params.row.status !== Status.Completed;\n      const shouldHighlight = isPastDue && isNotCompleted;\n      \n      return (\n        <span className={shouldHighlight ? \"text-red-600 font-semibold\" : \"\"}>\n          {dateStr}\n        </span>\n      );\n    },\n  },\n  { \n    field: \"percentComplete\", \n    headerName: \"% Complete\", \n    width: 110,\n    renderCell: (params) => (\n      <span className=\"font-medium\">{params.value ?? 0}%</span>\n    ),\n  },\n  { \n    field: \"inputStatus\", \n    headerName: \"Input Status\", \n    width: 200,\n    renderCell: (params) => params.value || \"N/A\",\n  },\n  { \n    field: \"assigneeUserName\", \n    headerName: \"Assignee\", \n    width: 150,\n    renderCell: (params) => params.value || \"Unassigned\",\n  },\n];\n\nconst Teams = () => {\n  const router = useRouter();\n  const [selectedTeamId, setSelectedTeamId] = useState<number | \"all\">(\"all\");\n  const [chartMode, setChartMode] = useState<\"type\" | \"priority\">(\"type\");\n  const [selectedWorkItemType, setSelectedWorkItemType] = useState<WorkItemType | \"all\">(\"all\");\n  const [selectedPriority, setSelectedPriority] = useState<Priority | \"all\">(\"all\");\n  const [workItemFilter, setWorkItemFilter] = useState<\"all\" | \"open\">(\"all\");\n  \n  // Modal states\n  const [isNewTeamModalOpen, setIsNewTeamModalOpen] = useState(false);\n  const [isEditTeamModalOpen, setIsEditTeamModalOpen] = useState(false);\n  const [teamToEdit, setTeamToEdit] = useState<any>(null);\n  \n  const { data: teams, isLoading, isError } = useGetTeamsQuery();\n\n  // Get the selected team data for the edit button\n  const selectedTeam = useMemo(() => {\n    if (selectedTeamId === \"all\" || !teams) return null;\n    return teams.find(team => team.id === selectedTeamId) || null;\n  }, [selectedTeamId, teams]);\n\n  // Auto-select the first team when teams are loaded\n  useEffect(() => {\n    if (teams && teams.length > 0 && selectedTeamId === \"all\") {\n      setSelectedTeamId(teams[0].id);\n    }\n  }, [teams, selectedTeamId]);\n  const { data: users } = useGetUsersQuery();\n  const { data: programs } = useGetProgramsQuery();\n  const { data: workItems } = useGetWorkItemsQuery();\n  const isDarkMode = useAppSelector((state) => state.global.isDarkMode);\n\n  // Filter users by selected team\n  const teamMembers = useMemo(() => {\n    if (!users || selectedTeamId === \"all\") return [];\n    return users.filter((user) => user.disciplineTeamId === selectedTeamId);\n  }, [users, selectedTeamId]);\n\n  // Get work items for selected team\n  const teamWorkItems = useMemo(() => {\n    if (!workItems || selectedTeamId === \"all\") return [];\n    return workItems.filter((item) => {\n      const assignee = users?.find((u) => u.id === item.assignedUserId);\n      return assignee?.disciplineTeamId === selectedTeamId;\n    });\n  }, [workItems, users, selectedTeamId]);\n\n  // Apply work item filter (all vs open)\n  const filteredTeamWorkItems = useMemo(() => {\n    if (workItemFilter === \"open\") {\n      return teamWorkItems.filter((item) => item.status !== \"Completed\");\n    }\n    return teamWorkItems;\n  }, [teamWorkItems, workItemFilter]);\n\n  // Filter work items by type for burndown chart (uses all team work items, not filtered by status)\n  const filteredTeamWorkItemsForBurndown = useMemo(() => {\n    if (selectedWorkItemType === \"all\") return teamWorkItems;\n    return teamWorkItems.filter((item) => item.workItemType === selectedWorkItemType);\n  }, [teamWorkItems, selectedWorkItemType]);\n\n  // Count work items per team member\n  const memberWorkItemCounts = useMemo(() => {\n    if (!teamMembers.length) return [];\n    \n    const counts = teamMembers.map((member) => {\n      const count = filteredTeamWorkItems.filter((item) => item.assignedUserId === member.id).length;\n      return {\n        name: member.name,\n        count,\n      };\n    });\n\n    return counts.sort((a, b) => b.count - a.count);\n  }, [filteredTeamWorkItems, teamMembers]);\n\n  // Pie chart data: Type vs Priority\n  const priorityCount = useMemo(() => {\n    const count: Record<string, number> = {};\n    filteredTeamWorkItems.forEach((item) => {\n      count[item.priority] = (count[item.priority] || 0) + 1;\n    });\n    return Object.entries(count).map(([name, count]) => ({ name, count }));\n  }, [filteredTeamWorkItems]);\n\n  const typeCount = useMemo(() => {\n    const count: Record<string, number> = {};\n    filteredTeamWorkItems.forEach((item) => {\n      count[item.workItemType] = (count[item.workItemType] || 0) + 1;\n    });\n    return Object.entries(count).map(([name, count]) => ({ name, count }));\n  }, [filteredTeamWorkItems]);\n\n  const pieData = chartMode === \"type\" ? typeCount : priorityCount;\n\n  // Priority counts for datagrid dropdown\n  const priorityCounts = useMemo(() => {\n    const count: Record<string, number> = {};\n    filteredTeamWorkItems.forEach((item) => {\n      count[item.priority] = (count[item.priority] || 0) + 1;\n    });\n    return count;\n  }, [filteredTeamWorkItems]);\n\n  const totalCount = filteredTeamWorkItems.length;\n\n  // Priority Work Items for the DataGrid\n  const filteredWorkItemsByPriority = useMemo(() => {\n    if (selectedPriority === \"all\") return filteredTeamWorkItems;\n    return filteredTeamWorkItems.filter((item) => item.priority === selectedPriority);\n  }, [filteredTeamWorkItems, selectedPriority]);\n\n  const displayedWorkItems = useMemo(() => {\n    return [...filteredWorkItemsByPriority]\n      .sort((a, b) => new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime())\n      .map((item) => ({\n        ...item,\n        assigneeUserName: item.assigneeUser?.name || \"Unassigned\",\n      }));\n  }, [filteredWorkItemsByPriority]);\n\n  const chartColors = isDarkMode\n    ? {\n        bar: \"#8884d8\",\n        barGrid: \"#303030\",\n        pieFill: \"#4A90E2\",\n        text: \"#FFFFFF\",\n      }\n    : {\n        bar: \"#8884d8\",\n        barGrid: \"#E0E0E0\",\n        pieFill: \"#82ca9d\",\n        text: \"#000000\",\n      };\n\n  const teamsWithPrograms = useMemo(() => {\n    if (!teams) return [];\n\n    const programNamesByTeamId = new Map<number, Set<string>>();\n\n    programs?.forEach((program) => {\n      program.disciplineTeams?.forEach((relation) => {\n        if (!programNamesByTeamId.has(relation.disciplineTeamId)) {\n          programNamesByTeamId.set(relation.disciplineTeamId, new Set());\n        }\n        programNamesByTeamId.get(relation.disciplineTeamId)?.add(program.name);\n      });\n    });\n\n    return teams.map((team) => ({\n      ...team,\n      programNames: Array.from(programNamesByTeamId.get(team.id) ?? []),\n    }));\n  }, [programs, teams]);\n\n  const columns: GridColDef[] = [\n    { field: \"id\", headerName: \"Team ID\", width: 100 },\n    { field: \"name\", headerName: \"Team Name\", width: 200 },\n    {\n      field: \"description\",\n      headerName: \"Description\",\n      width: 400,\n    },\n    {\n      field: \"programNames\",\n      headerName: \"Programs\",\n      width: 220,\n      renderCell: (params: any) => {\n        const programNames: string[] = params.row.programNames ?? [];\n        if (!programNames.length) return \"窶能";\n        return (\n          <div className=\"flex h-full w-full flex-wrap items-center justify-start gap-1\">\n            {programNames.map((name: string) => (\n              <span\n                key={name}\n                className=\"inline-flex rounded-full bg-blue-100 px-2 py-0.5 text-xs font-semibold text-blue-800 dark:bg-blue-900/40 dark:text-blue-200\"\n              >\n                {name}\n              </span>\n            ))}\n          </div>\n        );\n      },\n    },\n    { \n      field: \"teamManagerName\",\n      headerName: \"Team Manager\",\n      width: 200,\n      renderCell: (params: any) => params.value || \"窶能",\n    },\n    {\n      field: \"teamMembers\",\n      headerName: \"Team Members\",\n      width: 400,\n      renderCell: (params: any) => {\n        const teamMembers = users?.filter((user) => user.disciplineTeamId === params.row.id);\n        if (!teamMembers || teamMembers.length === 0) return \"窶能";\n        return teamMembers.map((member) => member.name).join(\", \");\n      },\n    },\n  ];\n\n  if (isLoading) return <div>Loading...</div>;\n  if (isError || !teams) return <div>Error fetching teams</div>;\n\n  return (\n    <div className=\"flex w-full flex-col p-8\">\n      <Header \n        name=\"Teams\" \n        buttonComponent={\n          <div className=\"flex gap-3\">\n            {/* New Team Button */}\n            <button\n              onClick={() => setIsNewTeamModalOpen(true)}\n              className=\"flex items-center rounded-md bg-blue-primary px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600\"\n            >\n              <PlusSquare className=\"mr-2 h-5 w-5\" />\n              New Team\n            </button>\n            {/* Edit Team Button - only show when a specific team is selected */}\n            {selectedTeam && (\n              <button\n                onClick={() => {\n                  setTeamToEdit(selectedTeam);\n                  setIsEditTeamModalOpen(true);\n                }}\n                className=\"flex items-center rounded-md bg-gray-300 px-3 py-2 text-sm font-medium text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-dark-tertiary dark:text-white dark:hover:bg-gray-600\"\n              >\n                <SquarePen className=\"mr-2 h-4 w-4\" />\n                Edit Team\n              </button>\n            )}\n          </div>\n        }\n      />\n\n      {/* Teams DataGrid */}\n      <div className=\"mb-6 rounded-lg bg-white p-4 shadow dark:bg-dark-secondary\">\n        <div style={{ height: 400, width: \"100%\" }}>\n          <DataGrid\n            rows={teamsWithPrograms}\n            columns={columns}\n            pagination\n            showToolbar\n            className={dataGridClassNames}\n            sx={dataGridSxStyles(isDarkMode)}\n          />\n        </div>\n      </div>\n\n      {/* Team Selector and Work Item Filter */}\n      <div className=\"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <label htmlFor=\"team-select\" className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n            Select a Team:\n          </label>\n          <select\n            id=\"team-select\"\n            className=\"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm dark:bg-dark-secondary dark:text-white\"\n            value={selectedTeamId}\n            onChange={(e) => {\n              const value = e.target.value;\n              setSelectedTeamId(value === \"all\" ? \"all\" : parseInt(value));\n            }}\n          >\n            {teams?.map((team) => (\n              <option key={team.id} value={team.id}>\n                {team.name}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Work Item Status Toggle */}\n        {selectedTeamId !== \"all\" && (\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex items-center gap-2 rounded-lg border border-gray-300 bg-gray-50 p-1 dark:border-gray-600 dark:bg-dark-tertiary\">\n              <button\n                onClick={() => setWorkItemFilter(\"all\")}\n                className={`rounded-md px-4 py-2 text-sm font-medium transition-colors ${\n                  workItemFilter === \"all\"\n                    ? \"bg-white text-blue-600 shadow-sm dark:bg-dark-secondary dark:text-blue-400\"\n                    : \"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200\"\n                }`}\n              >\n                All Work Items\n              </button>\n              <button\n                onClick={() => setWorkItemFilter(\"open\")}\n                className={`rounded-md px-4 py-2 text-sm font-medium transition-colors ${\n                  workItemFilter === \"open\"\n                    ? \"bg-white text-blue-600 shadow-sm dark:bg-dark-secondary dark:text-blue-400\"\n                    : \"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200\"\n                }`}\n              >\n                Open Work Items\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Team Members Work Items Bar Chart and Pie Chart */}\n      {selectedTeamId !== \"all\" && memberWorkItemCounts.length > 0 && (\n        <div className=\"mb-6 grid grid-cols-1 gap-4 md:grid-cols-2\">\n          {/* Bar Chart: Team Members Work Items */}\n          <div className=\"rounded-lg bg-white p-4 shadow dark:bg-dark-secondary\">\n            <h3 className=\"mb-4 text-lg font-semibold dark:text-white\">\n              Team Members Work Items\n            </h3>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={memberWorkItemCounts}>\n                <CartesianGrid strokeDasharray=\"3 3\" stroke={chartColors.barGrid} />\n                <XAxis \n                  dataKey=\"name\"\n                  stroke={chartColors.text}\n                  interval={0}\n                  angle={-45}\n                  textAnchor=\"end\"\n                  height={100}\n                />\n                <YAxis stroke={chartColors.text} />\n                <Tooltip />\n                <Bar dataKey=\"count\" fill={chartColors.bar}>\n                  {memberWorkItemCounts.map((_, index) => (\n                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                  ))}\n                </Bar>\n              </BarChart>\n            </ResponsiveContainer>\n          </div>\n\n          {/* Pie Chart: Work Item Distribution (By Type / By Priority) */}\n          <div className=\"rounded-lg bg-white p-4 shadow dark:bg-dark-secondary\">\n            <div className=\"mb-4 flex items-center justify-between\">\n              <h3 className=\"text-lg font-semibold dark:text-white\">\n                Work Item Distribution\n              </h3>\n              <select\n                value={chartMode}\n                onChange={(e) => setChartMode(e.target.value as \"type\" | \"priority\")}\n                className=\"rounded-md border border-gray-300 bg-white px-2 py-1 text-sm dark:bg-dark-secondary dark:text-white\"\n              >\n                <option value=\"type\">By Type</option>\n                <option value=\"priority\">By Priority</option>\n              </select>\n            </div>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <PieChart>\n                <Pie dataKey=\"count\" data={pieData} fill={chartColors.pieFill} label>\n                  {pieData.map((_, index) => (\n                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                  ))}\n                </Pie>\n                <Tooltip />\n                <Legend />\n              </PieChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n      )}\n\n      {/* Work Item Burndown Chart */}\n      {selectedTeamId !== \"all\" && teamWorkItems.length > 0 && (\n        <div className=\"mb-6 rounded-lg bg-white p-4 shadow dark:bg-dark-secondary\">\n          <div className=\"mb-4 flex items-center justify-between\">\n            <h3 className=\"text-lg font-semibold dark:text-white\">\n              Work Item Burndown\n            </h3>\n            <select\n              className=\"rounded-md border border-gray-300 bg-white px-2 py-1 text-sm dark:bg-dark-secondary dark:text-white\"\n              value={selectedWorkItemType}\n              onChange={(e) => {\n                const value = e.target.value as WorkItemType | \"all\";\n                setSelectedWorkItemType(value);\n              }}\n            >\n              <option value=\"all\">All Types</option>\n              {Object.values(WorkItemType).map((type) => (\n                <option key={type} value={type}>\n                  {type}\n                </option>\n              ))}\n            </select>\n          </div>\n          <BurndownChart workItems={filteredTeamWorkItemsForBurndown} isDarkMode={isDarkMode} />\n        </div>\n      )}\n\n      {/* Priority Work Items DataGrid */}\n      {selectedTeamId !== \"all\" && teamWorkItems.length > 0 && (\n        <div className=\"rounded-lg bg-white p-4 shadow dark:bg-dark-secondary\">\n          <div className=\"mb-4 flex items-center justify-between\">\n            <h3 className=\"text-lg font-semibold dark:text-white\">\n              {selectedPriority === \"all\"\n                ? \"All Work Items\"\n                : `${selectedPriority} Priority Work Items`}\n            </h3>\n            <select\n              value={selectedPriority}\n              onChange={(e) => setSelectedPriority(e.target.value as Priority | \"all\")}\n              className=\"rounded-md border border-gray-300 bg-white px-2 py-1 text-sm dark:bg-dark-secondary dark:text-white\"\n            >\n              <option value=\"all\">All Priorities ({totalCount})</option>\n              {Object.values(Priority).map((priority) => (\n                <option key={priority} value={priority}>\n                  {priority} ({priorityCounts[priority] ?? 0})\n                </option>\n              ))}\n            </select>\n          </div>\n          <div style={{ height: 650, width: \"100%\" }}>\n            <DataGrid\n              rows={displayedWorkItems}\n              columns={workItemColumns}\n              getRowClassName={() => \"data-grid-row\"}\n              getCellClassName={() => \"data-grid-cell\"}\n              className={dataGridClassNames}\n              showToolbar\n              sx={dataGridSxStyles(isDarkMode)}\n              initialState={{\n                sorting: {\n                  sortModel: [{ field: \"dueDate\", sort: \"asc\" }],\n                },\n              }}\n              onRowClick={(params) => router.push(`/work-items/${params.row.id}`)}\n            />\n          </div>\n        </div>\n      )}\n      \n      {/* Modals */}\n      <ModalNewDisciplineTeam\n        isOpen={isNewTeamModalOpen}\n        onClose={() => setIsNewTeamModalOpen(false)}\n      />\n      \n      <ModalEditDisciplineTeam\n        isOpen={isEditTeamModalOpen}\n        onClose={() => setIsEditTeamModalOpen(false)}\n        team={teamToEdit}\n      />\n    </div>\n  );\n};\n\nexport default Teams;"],"names":[],"mappings":"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","debugId":null}}]
}