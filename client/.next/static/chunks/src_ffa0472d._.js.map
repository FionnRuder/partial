{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/components/BurndownChart/index.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useMemo } from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { WorkItem, Status } from \"@/state/api\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  ChartOptions,\r\n} from \"chart.js\";\r\nimport { format, eachDayOfInterval, isAfter, isBefore, isEqual, parseISO } from \"date-fns\";\r\n\r\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\r\n\r\ntype Props = {\r\n  workItems: WorkItem[];\r\n  startDate?: string;\r\n  endDate?: string;\r\n  isDarkMode?: boolean;\r\n};\r\n\r\n// Helper function to parse date string without timezone conversion\r\n// Extracts the date portion (YYYY-MM-DD) and parses it as a local date\r\nconst parseDateOnly = (dateString: string | undefined): Date | null => {\r\n  if (!dateString) return null;\r\n  try {\r\n    // Extract just the date portion (YYYY-MM-DD) from ISO string\r\n    const dateOnly = dateString.split('T')[0];\r\n    // Parse as local date to avoid timezone conversion\r\n    const [year, month, day] = dateOnly.split('-').map(Number);\r\n    if (isNaN(year) || isNaN(month) || isNaN(day)) return null;\r\n    return new Date(year, month - 1, day);\r\n  } catch {\r\n    return null;\r\n  }\r\n};\r\n\r\nconst BurndownChart: React.FC<Props> = ({ workItems, startDate, endDate, isDarkMode = false }) => {\r\n  const today = new Date();\r\n  // Set today to midnight to avoid timezone issues when comparing\r\n  today.setHours(0, 0, 0, 0);\r\n\r\n  // Determine chart start/end date\r\n  const minDate = useMemo(() => {\r\n    if (startDate) {\r\n      const parsed = parseDateOnly(startDate);\r\n      return parsed || today;\r\n    }\r\n\r\n    const dates = workItems\r\n      .map((w) => parseDateOnly(w.dueDate))\r\n      .concat(workItems.map((w) => parseDateOnly(w.estimatedCompletionDate || w.dueDate)))\r\n      .concat(workItems.map((w) => parseDateOnly(w.actualCompletionDate || w.dueDate)))\r\n      .filter((d): d is Date => d !== null);\r\n    \r\n    return dates.length > 0 \r\n      ? new Date(Math.min(...dates.map((d) => d.getTime())))\r\n      : today;\r\n  }, [workItems, startDate, today]);\r\n\r\n  const maxDate = useMemo(() => {\r\n    // If endDate is explicitly provided, use it\r\n    if (endDate) {\r\n      const parsed = parseDateOnly(endDate);\r\n      return parsed || today;\r\n    }\r\n\r\n    // Collect all dates from work items (dueDate, estimatedCompletionDate, actualCompletionDate)\r\n    const dates = workItems\r\n      .map((w) => parseDateOnly(w.dueDate))\r\n      .concat(workItems.map((w) => parseDateOnly(w.estimatedCompletionDate || w.dueDate)))\r\n      .concat(workItems.map((w) => parseDateOnly(w.actualCompletionDate || w.dueDate)))\r\n      .filter((d): d is Date => d !== null);\r\n    \r\n    // Get the maximum of all dates\r\n    const max = dates.length > 0 \r\n      ? new Date(Math.max(...dates.map((d) => d.getTime())))\r\n      : today;\r\n    \r\n    // Ensure the max is at least today\r\n    return isAfter(max, today) ? max : today;\r\n  }, [workItems, endDate, today]);\r\n\r\n  const dates = eachDayOfInterval({ start: minDate, end: maxDate }).map((d) => format(d, \"yyyy-MM-dd\"));\r\n\r\n  // Get total number of work items\r\n  const totalItems = workItems.length;\r\n\r\n  // Get the latest due date for baseline calculation\r\n  const latestDueDate = useMemo(() => {\r\n    const dueDates = workItems\r\n      .map((w) => parseDateOnly(w.dueDate))\r\n      .filter((d): d is Date => d !== null);\r\n    return dueDates.length > 0 ? new Date(Math.max(...dueDates.map((d) => d.getTime()))) : maxDate;\r\n  }, [workItems, maxDate]);\r\n\r\n  // Helper function to count remaining items for actuals (based on actual completion date or status)\r\n  const getActualsRemaining = (dateStr: string): number => {\r\n    const currentDate = parseDateOnly(dateStr);\r\n    if (!currentDate) return workItems.length;\r\n    \r\n    return workItems.filter((w) => {\r\n      // If item has an actualCompletionDate, use it for precise timing\r\n      if (w.actualCompletionDate) {\r\n        const completionDate = parseDateOnly(w.actualCompletionDate);\r\n        if (!completionDate) return true; // No valid date means still remaining\r\n        // Item is remaining if completion date is after current date\r\n        return isAfter(completionDate, currentDate);\r\n      }\r\n      \r\n      // If no actualCompletionDate, check status\r\n      // If status is Completed, we don't know when it was completed, so we can't accurately track it\r\n      // For items without completion date but marked as completed, we'll assume they're completed\r\n      // This is a limitation - ideally all completed items should have actualCompletionDate\r\n      if (w.status === Status.Completed) {\r\n        // Without a date, we can't know when it was completed, so we'll treat it as completed\r\n        // This means it won't be counted as remaining\r\n        return false;\r\n      }\r\n      \r\n      // Item is still remaining if not completed\r\n      return true;\r\n    }).length;\r\n  };\r\n\r\n  // Helper function to count remaining items for forecast (based on estimated completion date)\r\n  const getForecastRemaining = (dateStr: string): number => {\r\n    const currentDate = parseDateOnly(dateStr);\r\n    if (!currentDate) return workItems.length;\r\n    \r\n    return workItems.filter((w) => {\r\n      const estimatedDate = w.estimatedCompletionDate \r\n        ? parseDateOnly(w.estimatedCompletionDate)\r\n        : w.dueDate \r\n        ? parseDateOnly(w.dueDate)\r\n        : null;\r\n      \r\n      if (!estimatedDate) return true; // No date means still remaining\r\n      \r\n      // Item is remaining if estimated completion date is after current date\r\n      return isAfter(estimatedDate, currentDate);\r\n    }).length;\r\n  };\r\n\r\n  // Calculate baseline: count items with due dates after current date\r\n  // This represents the planned burndown - items remaining based on their due dates\r\n  const baselineLine = dates.map((d) => {\r\n    const currentDate = parseDateOnly(d);\r\n    if (!currentDate) return workItems.length;\r\n    \r\n    return workItems.filter((w) => {\r\n      const dueDate = w.dueDate ? parseDateOnly(w.dueDate) : null;\r\n      if (!dueDate) return true; // Items without due dates are always remaining\r\n      // Item is remaining if due date is after current date\r\n      return isAfter(dueDate, currentDate);\r\n    }).length;\r\n  });\r\n\r\n  // Calculate forecast line: items remaining based on estimated completion dates\r\n  const forecastLine = dates.map((d) => getForecastRemaining(d));\r\n\r\n  // Calculate actuals line: items remaining based on actual completion dates (only up to today)\r\n  const actualsLine = dates.map((d) => {\r\n    const currentDate = parseDateOnly(d);\r\n    if (!currentDate) return null;\r\n    // Only show actuals up to today\r\n    if (isAfter(currentDate, today)) {\r\n      return null;\r\n    }\r\n    return getActualsRemaining(d);\r\n  });\r\n\r\n  const data = {\r\n    labels: dates,\r\n    datasets: [\r\n      {\r\n        label: \"Actuals (Remaining)\",\r\n        data: actualsLine,\r\n        borderColor: \"#66CDAA\",\r\n        backgroundColor: \"rgba(102,205,170,0.2)\",\r\n        fill: true,\r\n        spanGaps: false, // prevents the line from connecting beyond nulls\r\n      },\r\n      {\r\n        label: \"Baseline (Due Date)\",\r\n        data: baselineLine,\r\n        borderColor: \"#FF9500\",\r\n        backgroundColor: \"rgba(255,149,0,0.2)\",\r\n        fill: true,\r\n      },\r\n      {\r\n        label: \"Forecast (Estimated Completion)\",\r\n        data: forecastLine,\r\n        borderColor: \"#6FA8DC\",\r\n        backgroundColor: \"rgba(111, 168, 220, 0.2)\",\r\n        fill: true,\r\n      },\r\n    ],\r\n  };\r\n\r\n    const textColor = isDarkMode ? \"#FFFFFF\" : \"#000000\";\r\n    const gridColor = isDarkMode ? \"#444\" : \"#CCC\";\r\n\r\n    const options: ChartOptions<\"line\"> = {\r\n        responsive: true,\r\n        plugins: {\r\n            legend: { \r\n            position: \"top\",\r\n            labels: {\r\n                color: textColor, // legend text\r\n                usePointStyle: true,\r\n            },\r\n            },\r\n            title: { \r\n                display: false, \r\n                text: \"Work Item Burndown Chart\",\r\n                color: textColor, // chart title\r\n            },\r\n            tooltip: {\r\n                mode: \"index\",\r\n                intersect: false,\r\n                backgroundColor: isDarkMode ? \"#222\" : \"#fff\",\r\n                titleColor: textColor,\r\n                bodyColor: textColor,\r\n                borderColor: gridColor,\r\n                borderWidth: 1,\r\n                callbacks: {\r\n                    label: function (tooltipItem) {\r\n                        const datasetLabel = tooltipItem.dataset.label || \"\";\r\n                        const value = tooltipItem.raw === null ? \"‚Äî\" : tooltipItem.raw;\r\n                        return `${datasetLabel}: ${value}`;\r\n                    },\r\n                },\r\n            },\r\n        },\r\n        interaction: {\r\n            mode: \"index\",\r\n            intersect: false,\r\n        },\r\n        scales: {\r\n            x: {\r\n                title: { display: false, text: \"Date\", color: textColor },\r\n                ticks: { color: textColor },\r\n                grid: { color: gridColor },\r\n            },\r\n            y: {\r\n                beginAtZero: true,\r\n                title: { display: false, text: \"Remaining Work Items\", color: textColor },\r\n                ticks: { color: textColor },\r\n                grid: { color: gridColor },\r\n            },\r\n        },\r\n    };\r\n\r\n\r\n  return <Line data={data} options={options} />;\r\n};\r\n\r\nexport default BurndownChart;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/lib/utils.ts"],"sourcesContent":["export const dataGridClassNames =\r\n  \"border border-gray-200 bg-white shadow dark:border-stroke-dark dark:bg-dark-secondary dark:text-gray-200\";\r\n\r\nexport const dataGridSxStyles = (isDarkMode: boolean) => {\r\n  return {\r\n    \"& .MuiDataGrid-columnHeaders\": {\r\n      color: `${isDarkMode ? \"#e5e7eb\" : \"\"}`,\r\n      '& [role=\"row\"] > *': {\r\n        backgroundColor: `${isDarkMode ? \"#1d1f21\" : \"white\"}`,\r\n        borderColor: `${isDarkMode ? \"#2d3135\" : \"\"}`,\r\n      },\r\n    },\r\n    \"& .MuiIconbutton-root\": {\r\n      color: `${isDarkMode ? \"#a3a3a3\" : \"\"}`,\r\n    },\r\n    \"& .MuiTablePagination-root\": {\r\n      color: `${isDarkMode ? \"#a3a3a3\" : \"\"}`,\r\n    },\r\n    \"& .MuiTablePagination-selectIcon\": {\r\n      color: `${isDarkMode ? \"#a3a3a3\" : \"\"}`,\r\n    },\r\n    \"& .MuiDataGrid-cell\": {\r\n      border: \"none\",\r\n    },\r\n    \"& .MuiDataGrid-row\": {\r\n      borderBottom: `1px solid ${isDarkMode ? \"#2d3135\" : \"e5e7eb\"}`,\r\n      \"&:hover\": {\r\n        backgroundColor: `${isDarkMode ? \"#2d3135\" : \"#f3f4f6\"}`,\r\n      },\r\n    },\r\n    \"& .MuiDataGrid-withBorderColor\": {\r\n      borderColor: `${isDarkMode ? \"#2d3135\" : \"e5e7eb\"}`,\r\n    },\r\n  };\r\n};"],"names":[],"mappings":";;;;;;AAAO,MAAM,qBACX;AAEK,MAAM,mBAAmB,CAAC;IAC/B,OAAO;QACL,gCAAgC;YAC9B,OAAO,AAAC,GAA8B,OAA5B,aAAa,YAAY;YACnC,sBAAsB;gBACpB,iBAAiB,AAAC,GAAmC,OAAjC,aAAa,YAAY;gBAC7C,aAAa,AAAC,GAA8B,OAA5B,aAAa,YAAY;YAC3C;QACF;QACA,yBAAyB;YACvB,OAAO,AAAC,GAA8B,OAA5B,aAAa,YAAY;QACrC;QACA,8BAA8B;YAC5B,OAAO,AAAC,GAA8B,OAA5B,aAAa,YAAY;QACrC;QACA,oCAAoC;YAClC,OAAO,AAAC,GAA8B,OAA5B,aAAa,YAAY;QACrC;QACA,uBAAuB;YACrB,QAAQ;QACV;QACA,sBAAsB;YACpB,cAAc,AAAC,aAA8C,OAAlC,aAAa,YAAY;YACpD,WAAW;gBACT,iBAAiB,AAAC,GAAqC,OAAnC,aAAa,YAAY;YAC/C;QACF;QACA,kCAAkC;YAChC,aAAa,AAAC,GAAoC,OAAlC,aAAa,YAAY;QAC3C;IACF;AACF","debugId":null}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/app/home/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport {\r\n  Priority,\r\n  Program,\r\n  WorkItem,\r\n  WorkItemType,\r\n  Status,\r\n  useGetProgramsQuery,\r\n  useGetWorkItemsQuery,\r\n  useGetWorkItemsByProgramQuery,\r\n  useGetTeamsQuery,\r\n  useGetMilestonesQuery,\r\n  useGetMilestonesByProgramQuery,\r\n} from \"@/state/api\";\r\nimport { useAppSelector } from \"../redux\";\r\nimport { DataGrid, GridColDef } from \"@mui/x-data-grid\";\r\nimport Header from \"@/components/Header\";\r\nimport BurndownChart from \"@/components/BurndownChart\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport {\r\n  Bar,\r\n  BarChart,\r\n  CartesianGrid,\r\n  Cell,\r\n  Legend,\r\n  Pie,\r\n  PieChart,\r\n  ResponsiveContainer,\r\n  Tooltip,\r\n  XAxis,\r\n  YAxis,\r\n} from \"recharts\";\r\nimport { dataGridClassNames, dataGridSxStyles } from \"@/lib/utils\";\r\nimport { format } from \"date-fns\";\r\nimport { ChevronDown, ChevronUp } from \"lucide-react\";\r\n\r\nconst workItemColumns: GridColDef<WorkItem>[] = [\r\n  { \r\n    field: \"workItemType\", \r\n    headerName: \"Type\", \r\n    width: 120,\r\n    renderCell: (params) => (\r\n      <span className=\"inline-flex rounded-full bg-purple-100 px-2 text-xs font-semibold leading-5 text-purple-800\">\r\n        {params.value}\r\n      </span>\r\n    ),\r\n  },\r\n  { \r\n    field: \"title\", \r\n    headerName: \"Title\", \r\n    minWidth: 200,\r\n    flex: 1,\r\n  },\r\n  { \r\n    field: \"status\", \r\n    headerName: \"Status\", \r\n    width: 140,\r\n    renderCell: (params) => (\r\n      <span className={`inline-flex rounded-full px-2 text-xs font-semibold leading-5 ${getStatusColor(params.value)}`}>\r\n        {params.value}\r\n      </span>\r\n    ),\r\n  },\r\n  { \r\n    field: \"priority\", \r\n    headerName: \"Priority\", \r\n    width: 110,\r\n    renderCell: (params) => (\r\n      <span className={`inline-flex rounded-full px-2 text-xs font-semibold leading-5 ${getPriorityColor(params.value)}`}>\r\n        {params.value}\r\n      </span>\r\n    ),\r\n  },\r\n  { \r\n    field: \"dueDate\", \r\n    headerName: \"Due Date\",\r\n    width: 120,\r\n    renderCell: (params) => {\r\n      const dateStr = formatDate(params.value);\r\n      const isPastDue = params.value && new Date(params.value) < new Date();\r\n      const isNotCompleted = params.row.status !== Status.Completed;\r\n      const shouldHighlight = isPastDue && isNotCompleted;\r\n      \r\n      return (\r\n        <span className={shouldHighlight ? \"text-red-600 font-semibold\" : \"\"}>\r\n          {dateStr}\r\n        </span>\r\n      );\r\n    },\r\n  },\r\n  { \r\n    field: \"estimatedCompletionDate\",\r\n    headerName: \"ECD\",\r\n    width: 130,\r\n    renderCell: (params) => {\r\n      const dateStr = formatDate(params.value);\r\n      const isPastDue = params.value && new Date(params.value) < new Date();\r\n      const isNotCompleted = params.row.status !== Status.Completed;\r\n      const shouldHighlight = isPastDue && isNotCompleted;\r\n      \r\n      return (\r\n        <span className={shouldHighlight ? \"text-red-600 font-semibold\" : \"\"}>\r\n          {dateStr}\r\n        </span>\r\n      );\r\n    },\r\n  },\r\n  { \r\n    field: \"percentComplete\", \r\n    headerName: \"% Complete\", \r\n    width: 110,\r\n    renderCell: (params) => (\r\n      <span className=\"font-medium\">{params.value ?? 0}%</span>\r\n    ),\r\n  },\r\n  { \r\n    field: \"inputStatus\", \r\n    headerName: \"Input Status\", \r\n    width: 200,\r\n    renderCell: (params) => params.value || \"N/A\",\r\n  },\r\n  { \r\n    field: \"assigneeUserName\", \r\n    headerName: \"Assignee\", \r\n    width: 150,\r\n    renderCell: (params) => params.value || \"Unassigned\",\r\n  },\r\n];\r\n\r\nconst COLORS = [\"#6FA8DC\", \"#66CDAA\", \"#FF9500\", \"#FF8042\", \"#A28FD0\", \"#FF6384\", \"#36A2EB\"];\r\n\r\nconst getStatusColor = (status: Status) => {\r\n  switch (status) {\r\n    case Status.ToDo:\r\n      return \"bg-gray-100 text-gray-800\";\r\n    case Status.WorkInProgress:\r\n      return \"bg-blue-100 text-blue-800\";\r\n    case Status.UnderReview:\r\n      return \"bg-yellow-100 text-yellow-800\";\r\n    case Status.Completed:\r\n      return \"bg-green-100 text-green-800\";\r\n    default:\r\n      return \"bg-gray-100 text-gray-800\";\r\n  }\r\n};\r\n\r\nconst getPriorityColor = (priority: Priority) => {\r\n  switch (priority) {\r\n    case Priority.Urgent:\r\n      return \"bg-red-100 text-red-800\";\r\n    case Priority.High:\r\n      return \"bg-orange-100 text-orange-800\";\r\n    case Priority.Medium:\r\n      return \"bg-yellow-100 text-yellow-800\";\r\n    case Priority.Low:\r\n      return \"bg-green-100 text-green-800\";\r\n    case Priority.Backlog:\r\n      return \"bg-gray-100 text-gray-800\";\r\n    default:\r\n      return \"bg-gray-100 text-gray-800\";\r\n  }\r\n};\r\n\r\nconst formatDate = (dateString: string) => {\r\n  if (!dateString) return \"N/A\";\r\n  const date = new Date(dateString);\r\n  return date.toLocaleDateString();\r\n};\r\n\r\nconst HomePage = () => {\r\n  const router = useRouter();\r\n  const { isAuthenticated, isLoading: authLoading } = useAuth();\r\n  const [selectedProgramId, setSelectedProgramId] = useState<number | \"all\">(\"all\");\r\n  const [chartMode, setChartMode] = useState<\"type\" | \"priority\">(\"type\");\r\n\r\n  // Call hooks unconditionally (React rules of hooks)\r\n  const { data: programs, isLoading: isProgramsLoading } = useGetProgramsQuery(undefined, {\r\n    skip: !isAuthenticated, // Skip API calls if not authenticated\r\n  });\r\n  const { data: teams, isLoading: isTeamsLoading } = useGetTeamsQuery(undefined, {\r\n    skip: !isAuthenticated,\r\n  });\r\n\r\n  const [selectedWorkItemType, setSelectedWorkItemType] = useState<WorkItemType | \"all\">(\"all\");\r\n  const [selectedPriority, setSelectedPriority] = useState<Priority | \"all\">(\"all\");\r\n  const [workItemFilter, setWorkItemFilter] = useState<\"all\" | \"open\">(\"all\");\r\n  const [showPastMilestones, setShowPastMilestones] = useState(false);\r\n  const barChartContainerRef = useRef<HTMLDivElement>(null);\r\n  const [barChartHeight, setBarChartHeight] = useState(400);\r\n  const pieChartContainerRef = useRef<HTMLDivElement>(null);\r\n  const [pieChartHeight, setPieChartHeight] = useState(400);\r\n\r\n  useEffect(() => {\r\n    setShowPastMilestones(false);\r\n  }, [selectedProgramId]);\r\n\r\n  // Measure bar chart container height to fill available space\r\n  useEffect(() => {\r\n    const updateBarChartHeight = () => {\r\n      if (barChartContainerRef.current) {\r\n        // Get the full container height and subtract header (h3 + mb-4) and padding (p-4 = 16px top + 16px bottom)\r\n        const containerHeight = barChartContainerRef.current.clientHeight;\r\n        const headerHeight = 28 + 16; // h3 text-lg (~28px) + mb-4 (16px margin)\r\n        const padding = 32; // p-4 = 16px top + 16px bottom\r\n        const chartHeight = containerHeight - headerHeight - padding;\r\n        setBarChartHeight(Math.max(chartHeight, 300)); // Minimum 300px\r\n      }\r\n    };\r\n\r\n    // Use requestAnimationFrame to ensure DOM is ready\r\n    requestAnimationFrame(updateBarChartHeight);\r\n    window.addEventListener('resize', updateBarChartHeight);\r\n    return () => window.removeEventListener('resize', updateBarChartHeight);\r\n  }, []); // Only recalculate on mount and window resize\r\n\r\n  // Measure pie chart container height to fill available space\r\n  useEffect(() => {\r\n    const updatePieChartHeight = () => {\r\n      if (pieChartContainerRef.current) {\r\n        // Get the full container height and subtract header (h3 + mb-4) and padding (p-4 = 16px top + 16px bottom)\r\n        const containerHeight = pieChartContainerRef.current.clientHeight;\r\n        const headerHeight = 28 + 16; // h3 text-lg (~28px) + mb-4 (16px margin)\r\n        const padding = 32; // p-4 = 16px top + 16px bottom\r\n        const chartHeight = containerHeight - headerHeight - padding;\r\n        setPieChartHeight(Math.max(chartHeight, 300)); // Minimum 300px\r\n      }\r\n    };\r\n\r\n    // Use requestAnimationFrame to ensure DOM is ready\r\n    requestAnimationFrame(updatePieChartHeight);\r\n    window.addEventListener('resize', updatePieChartHeight);\r\n    return () => window.removeEventListener('resize', updatePieChartHeight);\r\n  }, []); // Only recalculate on mount and window resize\r\n\r\n  // Redirect to onboarding if not authenticated\r\n  useEffect(() => {\r\n    if (!authLoading && !isAuthenticated) {\r\n      router.push(\"/onboarding\");\r\n    }\r\n  }, [isAuthenticated, authLoading, router]);\r\n\r\n  // Call all hooks unconditionally to follow rules of hooks\r\n  const {\r\n    data: allWorkItems,\r\n    isLoading: isAllWorkItemsLoading,\r\n    isError: allWorkItemsError,\r\n  } = useGetWorkItemsQuery(undefined, {\r\n    skip: !isAuthenticated,\r\n  });\r\n\r\n  const {\r\n    data: programWorkItems,\r\n    isLoading: isProgramWorkItemsLoading,\r\n    isError: programWorkItemsError,\r\n  } = useGetWorkItemsByProgramQuery(\r\n    { programId: selectedProgramId === \"all\" ? 0 : selectedProgramId },\r\n    { skip: selectedProgramId === \"all\" || !isAuthenticated }\r\n  );\r\n\r\n  const {\r\n    data: allMilestones,\r\n    isLoading: isAllMilestonesLoading,\r\n    isError: allMilestonesError,\r\n  } = useGetMilestonesQuery(undefined, {\r\n    skip: !isAuthenticated,\r\n  });\r\n\r\n  const {\r\n    data: programMilestones,\r\n    isLoading: isProgramMilestonesLoading,\r\n    isError: programMilestonesError,\r\n  } = useGetMilestonesByProgramQuery(\r\n    { programId: selectedProgramId === \"all\" ? 0 : selectedProgramId },\r\n    { skip: selectedProgramId === \"all\" || !isAuthenticated }\r\n  );\r\n\r\n  // Conditionally use the appropriate data based on selectedProgramId\r\n  const workItems = selectedProgramId === \"all\" ? allWorkItems : programWorkItems;\r\n  const isWorkItemsLoading = selectedProgramId === \"all\" ? isAllWorkItemsLoading : isProgramWorkItemsLoading;\r\n  const workItemsError = selectedProgramId === \"all\" ? allWorkItemsError : programWorkItemsError;\r\n\r\n  const milestones = selectedProgramId === \"all\" ? allMilestones : programMilestones;\r\n  const milestonesLoading = selectedProgramId === \"all\" ? isAllMilestonesLoading : isProgramMilestonesLoading;\r\n  const milestonesError = selectedProgramId === \"all\" ? allMilestonesError : programMilestonesError;\r\n\r\n  const displayedMilestones =\r\n    selectedProgramId === \"all\"\r\n      ? milestones\r\n      : milestones?.filter((m) => m.programId === selectedProgramId);\r\n\r\n  const startOfToday = new Date();\r\n  startOfToday.setHours(0, 0, 0, 0);\r\n\r\n  const sortedMilestones = [...(displayedMilestones ?? [])].sort(\r\n    (a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()\r\n  );\r\n\r\n  const upcomingMilestones = sortedMilestones.filter((milestone) => {\r\n    if (!milestone.date) return true;\r\n    const milestoneDate = new Date(milestone.date);\r\n    return milestoneDate >= startOfToday;\r\n  });\r\n\r\n  const pastMilestones = sortedMilestones\r\n    .filter((milestone) => milestone.date && new Date(milestone.date) < startOfToday)\r\n    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n\r\n  const isDarkMode = useAppSelector((state) => state.global.isDarkMode);\r\n\r\n  // Don't render anything if not authenticated (will redirect)\r\n  if (authLoading || !isAuthenticated) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isWorkItemsLoading || isProgramsLoading || isTeamsLoading)\r\n    return <div>Loading...</div>;\r\n  if (workItemsError || !workItems || !programs || !teams)\r\n    return <div>Error fetching data</div>;\r\n\r\n  /* ---------- DATA TRANSFORMS ---------- */\r\n\r\n  // First, apply the work item filter (all vs open) to all data\r\n  const filteredWorkItems = workItemFilter === \"open\"\r\n    ? workItems.filter((item) => item.status !== \"Completed\")\r\n    : workItems;\r\n\r\n  // 1Ô∏è‚É£ Work Items by Discipline Team\r\n  const teamCount = filteredWorkItems.reduce((acc: Record<string, number>, item: WorkItem) => {\r\n    const team = teams.find((t) => t.id === item.assigneeUser?.disciplineTeamId);\r\n    const teamName = team?.name || \"Unassigned\";\r\n    acc[teamName] = (acc[teamName] || 0) + 1;\r\n    return acc;\r\n  }, {});\r\n  const teamDistribution = Object.entries(teamCount).map(([name, count]) => ({ name, count })).sort((a, b) => b.count - a.count);\r\n\r\n  // 2Ô∏è‚É£ Pie chart data: Type vs Priority\r\n  const priorityCount = filteredWorkItems.reduce((acc: Record<string, number>, item: WorkItem) => {\r\n    acc[item.priority] = (acc[item.priority] || 0) + 1;\r\n    return acc;\r\n  }, {});\r\n  const priorityDistribution = Object.entries(priorityCount).map(([name, count]) => ({ name, count }));\r\n\r\n  const typeCount = filteredWorkItems.reduce((acc: Record<string, number>, item: WorkItem) => {\r\n    acc[item.workItemType] = (acc[item.workItemType] || 0) + 1;\r\n    return acc;\r\n  }, {});\r\n  const typeDistribution = Object.entries(typeCount).map(([name, count]) => ({ name, count }));\r\n\r\n  const pieData = chartMode === \"type\" ? typeDistribution : priorityDistribution;\r\n\r\n  // 3Ô∏è‚É£ Priority Work Items for the DataGrid (Urgent is default)\r\n  const filteredWorkItemsByPriority =\r\n    selectedPriority === \"all\"\r\n      ? filteredWorkItems\r\n      : filteredWorkItems.filter((item) => item.priority === selectedPriority);\r\n  \r\n  const displayedWorkItems = [...filteredWorkItemsByPriority]\r\n    .sort((a, b) => new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime())\r\n    .map((item) => ({\r\n      ...item,\r\n      assigneeUserName: item.assigneeUser?.name || \"Unassigned\",\r\n    }));\r\n\r\n  // Work Items filtered by Type (for Burndown Chart - uses all work items, not filtered by status):\r\n  const filteredWorkItemsForChart = \r\n  selectedWorkItemType === \"all\"\r\n    ? workItems\r\n    : workItems.filter((item) => item.workItemType === selectedWorkItemType);\r\n\r\n  const formattedTeamName = (name: string) => \r\n    name.length > 8 ? name.slice(0, 8) + \"‚Ä¶\" : name;\r\n\r\n  // üìä Priority counts for datagrid dropdown\r\n  const priorityCounts = filteredWorkItems.reduce(\r\n    (acc: Record<string, number>, item: WorkItem) => {\r\n      acc[item.priority] = (acc[item.priority] || 0) + 1;\r\n      return acc;\r\n    },\r\n    {}\r\n  );\r\n\r\n  const totalCount = filteredWorkItems.length;\r\n\r\n\r\n  const chartColors = isDarkMode\r\n    ? {\r\n        bar: \"#8884d8\",\r\n        barGrid: \"#303030\",\r\n        pieFill: \"#4A90E2\",\r\n        text: \"#FFFFFF\",\r\n      }\r\n    : {\r\n        bar: \"#8884d8\",\r\n        barGrid: \"#E0E0E0\",\r\n        pieFill: \"#82ca9d\",\r\n        text: \"#000000\",\r\n      };\r\n\r\n  return (\r\n    <div className=\"h-full w-full bg-gray-100 bg-transparent p-8\">\r\n      <Header name=\"Home Dashboard\" />\r\n\r\n      {/* ---- Program Selector and Work Item Filter ---- */}\r\n      <div className=\"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <select\r\n            id=\"program-select\"\r\n            className=\"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm dark:bg-dark-secondary dark:text-white\"\r\n            value={selectedProgramId}\r\n            onChange={(e) => {\r\n              const value = e.target.value;\r\n              setSelectedProgramId(value === \"all\" ? \"all\" : parseInt(value));\r\n            }}\r\n          >\r\n            <option value=\"all\">All Programs</option>\r\n            {programs.map((program) => (\r\n              <option key={program.id} value={program.id}>\r\n                {program.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Work Item Status Toggle */}\r\n        <div className=\"flex items-center gap-2\">\r\n          <div className=\"flex items-center gap-2 rounded-lg border border-gray-300 bg-gray-50 p-1 dark:border-gray-600 dark:bg-dark-tertiary\">\r\n            <button\r\n              onClick={() => setWorkItemFilter(\"all\")}\r\n              className={`rounded-md px-4 py-2 text-sm font-medium transition-colors ${\r\n                workItemFilter === \"all\"\r\n                  ? \"bg-white text-blue-600 shadow-sm dark:bg-dark-secondary dark:text-blue-400\"\r\n                  : \"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200\"\r\n              }`}\r\n            >\r\n              All Work Items\r\n            </button>\r\n            <button\r\n              onClick={() => setWorkItemFilter(\"open\")}\r\n              className={`rounded-md px-4 py-2 text-sm font-medium transition-colors ${\r\n                workItemFilter === \"open\"\r\n                  ? \"bg-white text-blue-600 shadow-sm dark:bg-dark-secondary dark:text-blue-400\"\r\n                  : \"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200\"\r\n              }`}\r\n            >\r\n              Open Work Items\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ---- Charts and Table ---- */}\r\n      <div className=\"grid grid-cols-1 gap-4 md:grid-cols-3\">\r\n        {/* ---- Burndown Chart: Work Items ‚Äî spans 2 columns ---- */}\r\n        <div className=\"col-span-3 md:col-span-2\">\r\n          <div className=\"rounded-lg bg-white p-4 shadow dark:bg-dark-secondary\">\r\n            <div className=\"mb-4 flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold dark:text-white\">\r\n                Work Item Burndown\r\n              </h3>\r\n              <select\r\n                className=\"rounded-md border border-gray-300 bg-white px-2 py-1 text-sm dark:bg-dark-secondary dark:text-white\"\r\n                value={selectedWorkItemType}\r\n                onChange={(e) => {\r\n                  const value = e.target.value as WorkItemType | \"all\";\r\n                  setSelectedWorkItemType(value);\r\n                }}\r\n              >\r\n                <option value=\"all\">All Types</option>\r\n                {Object.values(WorkItemType).map((type) => (\r\n                  <option key={type} value={type}>\r\n                    {type}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <BurndownChart workItems={filteredWorkItemsForChart} isDarkMode={isDarkMode} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* üß© Milestones Section */}\r\n        <div className=\"col-span-3 md:col-span-1 md:row-span-2\">\r\n          <div className=\"rounded-lg bg-white shadow dark:bg-dark-secondary md:max-h-[940px] max-h-[50vh] overflow-y-auto\">\r\n            <div className=\"sticky top-0 bg-white dark:bg-dark-secondary z-10 p-4 border-b border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h2 className=\"text-lg font-semibold dark:text-white\">\r\n                  Program Milestones\r\n                </h2>\r\n                <div className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                  {upcomingMilestones.length} upcoming\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4 pt-0\">\r\n\r\n            {milestonesLoading ? (\r\n              <div className=\"flex items-center justify-center py-8\">\r\n                <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\r\n                <span className=\"ml-2 text-gray-500 dark:text-gray-300\">Loading milestones...</span>\r\n              </div>\r\n            ) : milestonesError ? (\r\n              <div className=\"text-center py-8\">\r\n                <div className=\"text-red-500 text-sm\">Error loading milestones</div>\r\n              </div>\r\n            ) : sortedMilestones.length > 0 ? (\r\n              <div className=\"space-y-3\">\r\n                {upcomingMilestones.length > 0 ? (\r\n                  upcomingMilestones.map((milestone) => {\r\n                    const milestoneWorkItems = filteredWorkItems?.filter(\r\n                      (wi) => wi.dueByMilestoneId === milestone.id\r\n                    );\r\n                    const programName =\r\n                      programs.find((p) => p.id === milestone.programId)?.name || \"‚Äî\";\r\n\r\n                    const today = new Date();\r\n                    const milestoneDate = milestone.date ? new Date(milestone.date) : null;\r\n                    const isPast = milestoneDate ? milestoneDate < today : false;\r\n                    const daysUntil = milestoneDate\r\n                      ? Math.ceil(\r\n                          (milestoneDate.getTime() - today.getTime()) /\r\n                            (1000 * 60 * 60 * 24)\r\n                        )\r\n                      : null;\r\n                    const isWithin30Days =\r\n                      daysUntil !== null ? daysUntil <= 30 && daysUntil >= 0 : false;\r\n\r\n                    const getStatusBadge = () => {\r\n                      if (isPast) {\r\n                        return (\r\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300\">\r\n                            <div className=\"mr-1 h-2 w-2 rounded-full bg-gray-400\"></div>\r\n                            Completed\r\n                          </span>\r\n                        );\r\n                      }\r\n                      if (isWithin30Days) {\r\n                        return (\r\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200\">\r\n                            <div className=\"mr-1 h-2 w-2 animate-pulse rounded-full bg-orange-500\"></div>\r\n                            Due in {daysUntil} days\r\n                          </span>\r\n                        );\r\n                      }\r\n                      return (\r\n                        <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\">\r\n                          <div className=\"mr-1 h-2 w-2 rounded-full bg-blue-500\"></div>\r\n                          Upcoming\r\n                        </span>\r\n                      );\r\n                    };\r\n\r\n                    return (\r\n                      <div\r\n                        key={milestone.id}\r\n                        className={`rounded-lg border px-3 py-2 transition-all duration-200 hover:shadow-md ${\r\n                          isPast\r\n                            ? \"bg-gray-50 border-gray-200 dark:bg-gray-800 dark:border-gray-700\"\r\n                            : isWithin30Days\r\n                            ? \"bg-orange-50 border-orange-200 dark:bg-orange-900/20 dark:border-orange-700\"\r\n                            : \"bg-white border-gray-200 dark:bg-dark-tertiary dark:border-gray-700\"\r\n                        }`}\r\n                      >\r\n                        <div className=\"mb-1 flex items-start justify-between gap-2\">\r\n                          <div className=\"min-w-0 flex-1\">\r\n                            <h3\r\n                              className={`truncate text-sm font-semibold ${\r\n                                isPast\r\n                                  ? \"text-gray-600 dark:text-gray-400\"\r\n                                  : \"text-gray-900 dark:text-white\"\r\n                              }`}\r\n                            >\r\n                              {milestone.name}\r\n                            </h3>\r\n                            <p\r\n                              className={`truncate text-xs ${\r\n                                isPast\r\n                                  ? \"text-gray-500 dark:text-gray-500\"\r\n                                  : \"text-gray-600 dark:text-gray-300\"\r\n                              }`}\r\n                            >\r\n                              {programName}\r\n                            </p>\r\n                          </div>\r\n                          {getStatusBadge()}\r\n                        </div>\r\n                        <div className=\"flex items-center justify-between text-xs\">\r\n                          <span\r\n                            className={`${\r\n                              isPast\r\n                                ? \"text-gray-500 dark:text-gray-500\"\r\n                                : \"text-gray-600 dark:text-gray-400\"\r\n                            }`}\r\n                          >\r\n                            {milestoneDate\r\n                              ? milestoneDate.toLocaleDateString(\"en-US\", {\r\n                                  month: \"short\",\r\n                                  day: \"numeric\",\r\n                                  year: \"numeric\",\r\n                                })\r\n                              : \"No date\"}\r\n                          </span>\r\n                          <span\r\n                            className={`rounded-full px-2 py-1 text-xs font-medium ${\r\n                              milestoneWorkItems && milestoneWorkItems.length > 0\r\n                                ? \"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\"\r\n                                : \"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400\"\r\n                            }`}\r\n                          >\r\n                            {milestoneWorkItems?.length || 0} work items\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <div className=\"rounded-md border border-dashed border-blue-200 bg-blue-50 px-3 py-4 text-center text-sm text-blue-700 dark:border-blue-900 dark:bg-blue-950/40 dark:text-blue-200\">\r\n                    No upcoming milestones. Create a new milestone to keep momentum.\r\n                  </div>\r\n                )}\r\n\r\n                {pastMilestones.length > 0 && (\r\n                  <div className=\"mt-3 border-t border-gray-200 pt-3 dark:border-gray-700\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowPastMilestones((prev) => !prev)}\r\n                      className=\"flex w-full items-center justify-between rounded-md bg-gray-100 px-3 py-2 text-xs font-medium text-gray-700 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700\"\r\n                    >\r\n                      <span>Past Milestones ({pastMilestones.length})</span>\r\n                      {showPastMilestones ? (\r\n                        <ChevronUp className=\"h-4 w-4\" />\r\n                      ) : (\r\n                        <ChevronDown className=\"h-4 w-4\" />\r\n                      )}\r\n                    </button>\r\n\r\n                    {showPastMilestones && (\r\n                      <div className=\"mt-2 space-y-1.5\">\r\n                        {pastMilestones.map((milestone) => {\r\n                          const milestoneDate = milestone.date\r\n                            ? new Date(milestone.date)\r\n                            : null;\r\n                          const programName =\r\n                            programs.find((p) => p.id === milestone.programId)?.name || \"‚Äî\";\r\n\r\n                          return (\r\n                            <div\r\n                              key={`past-${milestone.id}`}\r\n                              className=\"flex items-center justify-between gap-3 rounded-md border border-gray-200 bg-white px-3 py-2 text-xs dark:border-gray-700 dark:bg-dark-tertiary\"\r\n                            >\r\n                              <div className=\"min-w-0\">\r\n                                <p className=\"truncate font-medium text-gray-700 dark:text-gray-200\">\r\n                                  {milestone.name}\r\n                                </p>\r\n                                <p className=\"truncate text-[11px] text-gray-500 dark:text-gray-400\">\r\n                                  {programName}\r\n                                </p>\r\n                              </div>\r\n                              <div className=\"flex flex-col items-end text-[11px] text-gray-500 dark:text-gray-400\">\r\n                                {milestoneDate\r\n                                  ? milestoneDate.toLocaleDateString(\"en-US\", {\r\n                                      month: \"short\",\r\n                                      day: \"numeric\",\r\n                                      year: \"numeric\",\r\n                                    })\r\n                                  : \"No date\"}\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"py-8 text-center\">\r\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                  No milestones found\r\n                </div>\r\n              </div>\r\n            )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ---- Bar Chart and Pie Chart sit on first row ---- */}\r\n        <div className=\"col-span-3 md:col-span-2 grid grid-cols-2 gap-4\">\r\n          {/* ---- Bar Chart: Work Items by Discipline Team ---- */}\r\n          <div ref={barChartContainerRef} className=\"flex flex-col rounded-lg bg-white p-4 shadow dark:bg-dark-secondary min-h-[400px] h-full\">\r\n            <h3 className=\"mb-4 text-lg font-semibold dark:text-white\">\r\n              Work Items by Discipline Team\r\n            </h3>\r\n            <div className=\"flex-1 min-h-0\">\r\n              <ResponsiveContainer width=\"100%\" height={barChartHeight}>\r\n                <BarChart data={teamDistribution} margin={{ bottom: 50 }}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke={chartColors.barGrid} />\r\n                  <XAxis \r\n                    dataKey=\"name\"\r\n                    tickFormatter={formattedTeamName}\r\n                    stroke={chartColors.text}\r\n                    interval={0}\r\n                    angle={-45}\r\n                    textAnchor=\"end\"\r\n                    height={70}\r\n                    tick={{ fill: chartColors.text, fontSize: 11 }}\r\n                  />\r\n                  <YAxis stroke={chartColors.text} />\r\n                  <Tooltip />\r\n                  <Bar dataKey=\"count\" fill={chartColors.bar}>\r\n                    {teamDistribution.map((_, index) => (\r\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                    ))}\r\n                  </Bar>\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n          </div>\r\n\r\n          {/* ---- Pie Chart: Type vs Priority ---- */}\r\n          <div ref={pieChartContainerRef} className=\"flex flex-col rounded-lg bg-white p-4 shadow dark:bg-dark-secondary min-h-[400px] h-full\">\r\n            <div className=\"mb-4 flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold dark:text-white\">\r\n                Work Item Distribution (By Type / By Priority)\r\n              </h3>\r\n              <select\r\n                value={chartMode}\r\n                onChange={(e) => setChartMode(e.target.value as \"type\" | \"priority\")}\r\n                className=\"rounded-md border border-gray-300 bg-white px-2 py-1 text-sm dark:bg-dark-secondary dark:text-white\"\r\n              >\r\n                <option value=\"type\">By Type</option>\r\n                <option value=\"priority\">By Priority</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"flex-1 min-h-0\">\r\n              <ResponsiveContainer width=\"100%\" height={pieChartHeight}>\r\n                <PieChart>\r\n                  <Pie dataKey=\"count\" data={pieData} fill={chartColors.pieFill} label>\r\n                    {pieData.map((_, index) => (\r\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                    ))}\r\n                  </Pie>\r\n                  <Tooltip />\r\n                  <Legend />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ---- Urgent Work Items DataGrid ---- */}\r\n        <div className=\"rounded-lg bg-white p-4 shadow dark:bg-dark-secondary md:col-span-3\">\r\n          <div className=\"mb-4 flex items-center justify-between\">\r\n            <h3 className=\"text-lg font-semibold dark:text-white\">\r\n              {selectedPriority === \"all\"\r\n                ? \"All Work Items\"\r\n                : `${selectedPriority} Priority Work Items`}\r\n            </h3>\r\n            <select\r\n              value={selectedPriority}\r\n              onChange={(e) => setSelectedPriority(e.target.value as Priority | \"all\")}\r\n              className=\"rounded-md border border-gray-300 bg-white px-2 py-1 text-sm dark:bg-dark-secondary dark:text-white\"\r\n            >\r\n              <option value=\"all\">All Priorities ({totalCount})</option>\r\n              {Object.values(Priority).map((priority) => (\r\n                <option key={priority} value={priority}>\r\n                  {priority} ({priorityCounts[priority] ?? 0})\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div style={{ height: 650, width: \"100%\" }}>\r\n            <DataGrid\r\n              rows={displayedWorkItems}\r\n              columns={workItemColumns}\r\n              loading={isWorkItemsLoading}\r\n              getRowClassName={() => \"data-grid-row\"}\r\n              getCellClassName={() => \"data-grid-cell\"}\r\n              className={dataGridClassNames}\r\n              showToolbar\r\n              sx={dataGridSxStyles(isDarkMode)}\r\n              initialState={{\r\n                sorting: {\r\n                  sortModel: [{ field: \"dueDate\", sort: \"asc\" }],\r\n                },\r\n              }}\r\n              onRowClick={(params) => router.push(`/work-items/${params.row.id}`)}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}