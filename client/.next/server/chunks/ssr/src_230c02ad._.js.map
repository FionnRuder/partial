{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/components/ModalEditWorkItem/index.tsx"],"sourcesContent":["\"use client\";\n\nimport Modal from '@/components/Modal';\nimport {\n  Priority,\n  Status,\n  StatusLabels,\n  WorkItemType,\n  DeliverableTypeLabels,\n  IssueTypeLabels,\n  useEditWorkItemMutation,\n  useDeleteWorkItemMutation,\n  WorkItem as WorkItemTypeModel,\n  WorkItemEditInput,\n  useGetPartsQuery,\n  useGetProgramsQuery,\n  useGetMilestonesQuery,\n  useGetUsersQuery,\n  useGetDeliverableTypesQuery,\n  useGetIssueTypesQuery,\n  useGetWorkItemsQuery,\n  useGetWorkItemByIdQuery,\n} from '@/state/api';\nimport React, { useEffect, useState } from 'react';\nimport { formatISO } from 'date-fns';\nimport { showToast, showApiSuccess } from '@/lib/toast';\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n  workItem: WorkItemTypeModel | null;\n};\n\nconst ModalEditWorkItem = ({ isOpen, onClose, workItem: workItemProp }: Props) => {\n  const [editWorkItem, { isLoading: isSaving }] = useEditWorkItemMutation();\n  const [deleteWorkItem, { isLoading: isDeleting }] = useDeleteWorkItemMutation();\n  const { data: parts = [], isLoading: partsLoading } = useGetPartsQuery();\n  const { data: programs = [], isLoading: programsLoading } = useGetProgramsQuery();\n  const { data: milestones = [], isLoading: milestonesLoading } = useGetMilestonesQuery();\n  const { data: users = [], isLoading: usersLoading } = useGetUsersQuery();\n  const { data: deliverableTypes = [] } = useGetDeliverableTypesQuery();\n  const { data: issueTypes = [] } = useGetIssueTypesQuery();\n  const { data: allWorkItems = [] } = useGetWorkItemsQuery();\n  \n  // Refetch work item with dependencies when modal opens\n  const { data: workItemWithDeps, refetch: refetchWorkItem } = useGetWorkItemByIdQuery(\n    workItemProp?.id || 0,\n    { skip: !workItemProp?.id || !isOpen }\n  );\n  \n  // Use the refetched work item if available (has dependencies), otherwise fall back to prop\n  const workItem = workItemWithDeps || workItemProp;\n\n  // form state\n  const [workItemType, setWorkItemType] = useState<WorkItemType | \"\">(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [status, setStatus] = useState<Status | \"\">(\"\");\n  const [priority, setPriority] = useState<Priority | \"\">(\"\");\n  const [tags, setTags] = useState(\"\");\n  const [dateOpened, setDateOpened] = useState(\"\");\n  const [dueDate, setDueDate] = useState(\"\");\n  const [estimatedCompletionDate, setEstimatedCompletionDate] = useState(\"\");\n  const [actualCompletionDate, setActualCompletionDate] = useState(\"\");\n  const [percentComplete, setPercentComplete] = useState<number>(0);\n  const [inputStatus, setInputStatus] = useState(\"\");\n  const [partIds, setPartIds] = useState<number[]>([]);\n  const [partSearchQuery, setPartSearchQuery] = useState(\"\");\n  const [dependencyWorkItemIds, setDependencyWorkItemIds] = useState<number[]>([]);\n  const [dependencySearchQuery, setDependencySearchQuery] = useState(\"\");\n  const [programId, setProgramId] = useState(\"\");\n  const [programName, setProgramName] = useState(\"\");\n  const [dueByMilestoneId, setDueByMilestoneId] = useState(\"\");\n  const [milestoneName, setMilestoneName] = useState(\"\");\n  const [authorUserId, setAuthorUserId] = useState(\"\");\n  const [authorUserName, setAuthorUserName] = useState(\"\");\n  const [assignedUserId, setAssignedUserId] = useState(\"\");\n  const [assignedUserName, setAssignedUserName] = useState(\"\");\n\n  const [issueType, setIssueType] = useState<string>(\"\");\n  const [rootCause, setRootCause] = useState(\"\");\n  const [correctiveAction, setCorrectiveAction] = useState(\"\");\n  const [deliverableType, setDeliverableType] = useState<string>(\"\");\n\n  // Refetch work item when modal opens to ensure we have dependencies\n  useEffect(() => {\n    if (isOpen && workItemProp?.id) {\n      refetchWorkItem();\n    }\n  }, [isOpen, workItemProp?.id, refetchWorkItem]);\n\n  // Prefill all fields when modal opens\n  useEffect(() => {\n    if (workItem) {\n      console.log(\"workItem.partNumbers\", workItem.partNumbers);\n      console.log(\"workItem.dependencies\", workItem.dependencies);\n      setWorkItemType(workItem.workItemType || \"\");\n      setTitle(workItem.title || \"\");\n      setDescription(workItem.description || \"\");\n      setStatus(workItem.status || \"\");\n      setPriority(workItem.priority || \"\");\n      setTags(workItem.tags || \"\");\n      setDateOpened(workItem.dateOpened ? workItem.dateOpened.split(\"T\")[0] : \"\");\n      setDueDate(workItem.dueDate ? workItem.dueDate.split(\"T\")[0] : \"\");\n      setEstimatedCompletionDate(\n        workItem.estimatedCompletionDate ? workItem.estimatedCompletionDate.split(\"T\")[0] : \"\"\n      );\n      setActualCompletionDate(\n        workItem.actualCompletionDate ? workItem.actualCompletionDate.split(\"T\")[0] : \"\"\n      );\n      setPercentComplete(workItem.percentComplete || 0);\n      setInputStatus(workItem.inputStatus || \"\");\n      setPartIds(workItem.partNumbers?.map((p) => p.partId) || []);\n      const dependencyIds = workItem.dependencies?.map((d) => d.dependencyWorkItemId) || [];\n      console.log(\"Setting dependencyWorkItemIds:\", dependencyIds);\n      setDependencyWorkItemIds(dependencyIds);\n      \n      setProgramId(workItem.programId?.toString() || \"\");\n      // Prefill program name if known\n      const program = programs.find((p) => p.id === workItem.programId);\n      setProgramName(program?.name || \"\");\n\n      setDueByMilestoneId(workItem.dueByMilestoneId?.toString() || \"\");\n      // Prefill milestone name if known\n      const milestone = milestones.find((p) => p.id === workItem.dueByMilestoneId);\n      setMilestoneName(milestone?.name || \"\");\n\n      setAuthorUserId(workItem.authorUserId?.toString() || \"\");\n      // prefill authorUserName if workItem.authorUserId is known\n      const authorUser = users.find((u) => u.id === workItem.authorUserId);\n      setAuthorUserName(authorUser?.name || \"\");\n\n      setAssignedUserId(workItem.assignedUserId?.toString() || \"\");\n      // prefill assignedUserName if workItem.assignedUserId is known\n      const assignedUser = users.find((u) => u.id === workItem.assignedUserId);\n      setAssignedUserName(assignedUser?.name || \"\");\n\n      if (workItem.workItemType === WorkItemType.Issue) {\n        const type = workItem.issueDetail?.issueType;\n        const typeName = typeof type === 'string' ? type : (type && typeof type === 'object' && 'name' in type ? (type as { name: string }).name : '');\n        setIssueType(typeName);\n        setRootCause(workItem.issueDetail?.rootCause || \"\");\n        setCorrectiveAction(workItem.issueDetail?.correctiveAction || \"\");\n      } else if (workItem.workItemType === WorkItemType.Deliverable) {\n        const type = workItem.deliverableDetail?.deliverableType;\n        const typeName = typeof type === 'string' ? type : (type && typeof type === 'object' && 'name' in type ? (type as { name: string }).name : '');\n        setDeliverableType(typeName);\n      }\n    }\n  }, [workItem, programs, milestones, users, allWorkItems]);\n\n  const isFormValid = (): boolean =>\n    !!workItemType &&\n    !!title &&\n    !!description &&\n    !!status &&\n    !!priority &&\n    !!dateOpened &&\n    !!dueDate &&\n    !!estimatedCompletionDate &&\n    percentComplete >= 0 &&\n    !!inputStatus &&\n    !!programId &&\n    !!dueByMilestoneId &&\n    !!authorUserId &&\n    !!assignedUserId;\n\n  const handleSubmit = async () => {\n    if (!workItem || !isFormValid()) return;\n\n    const updatedWorkItem: WorkItemEditInput = {\n      workItemType: workItemType as WorkItemType,\n      status: status as Status,\n      priority: priority as Priority,\n      title,\n      description,\n      tags,\n      dateOpened: formatISO(new Date(dateOpened), { representation: 'complete' }),\n      dueDate: formatISO(new Date(dueDate), { representation: 'complete' }),\n      estimatedCompletionDate: formatISO(new Date(estimatedCompletionDate), { representation: 'complete' }),\n      actualCompletionDate: actualCompletionDate\n        ? formatISO(new Date(actualCompletionDate), { representation: 'complete' })\n        : undefined,\n      percentComplete,\n      inputStatus,\n      partIds,\n      dependencyWorkItemIds: dependencyWorkItemIds.length > 0 ? dependencyWorkItemIds : undefined,\n      programId: parseInt(programId),\n      dueByMilestoneId: parseInt(dueByMilestoneId),\n      authorUserId: authorUserId,\n      assignedUserId: assignedUserId,\n      issueDetail: workItemType === WorkItemType.Issue && issueType\n        ? {\n            issueType: issueType, // Send type name as string\n            rootCause,\n            correctiveAction,\n          }\n        : undefined,\n      deliverableDetail: workItemType === WorkItemType.Deliverable && deliverableType\n        ? {\n            deliverableType: deliverableType, // Send type name as string\n          }\n        : undefined,\n    };\n\n    try {\n        await editWorkItem({\n            workItemId: workItem.id,\n            updates: updatedWorkItem,\n        }).unwrap();\n        showApiSuccess(\"Work item updated successfully\");\n        onClose(); // close modal on success\n    } catch (err: any) {\n        // Extract error message from RTK Query error structure\n        const errorMessage = \n            err?.data?.message || \n            (err?.data && typeof err.data === \"string\" ? err.data : null) ||\n            err?.message || \n            \"Failed to save work item\";\n        \n        // Show toast with the error message directly (avoid passing error object)\n        showToast.error(errorMessage);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!workItem) return;\n\n    const confirmed = window.confirm(\n        `Are you sure you want to delete \"${workItem.title}\"? This action cannot be undone.`\n    );\n    if (!confirmed) return;\n\n    try {\n        await deleteWorkItem(workItem.id).unwrap();\n        showApiSuccess(\"Work item deleted successfully\");\n        onClose(); // close modal on success\n    } catch (err: any) {\n        // Extract error message from RTK Query error structure\n        const errorMessage = \n            err?.data?.message || \n            (err?.data && typeof err.data === \"string\" ? err.data : null) ||\n            err?.message || \n            \"Failed to delete work item\";\n        \n        // Show toast with the error message directly\n        showToast.error(errorMessage);\n    }\n  };\n\n\n  const selectStyles =\n    \"mb-4 block w-full rounded border border-gray-300 px-3 py-2 dark:border-dark-tertiary dark:bg-dark-tertiary dark:text-white dark:focus:outline-none\";\n  const inputStyles =\n    \"w-full rounded border border-gray-300 p-2 shadow-sm dark:border-dark-tertiary dark:bg-dark-tertiary dark:text-white dark:focus:outline-none\";\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} name={`Edit ${workItem?.workItemType ?? \"Work Item\"}`}>\n      <form\n        className=\"mt-4 space-y-6\"\n        onSubmit={(e) => {\n          e.preventDefault();\n          handleSubmit();\n        }}\n      >\n        {/* Work Item Type */}\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Work Item Type:\n            </label>\n            <select\n            className={selectStyles}\n            value={workItemType}\n            onChange={(e) =>\n                setWorkItemType(\n                e.target.value ? (WorkItemType[e.target.value as keyof typeof WorkItemType]) : \"\"\n                )\n            }\n            >\n            <option value=\"\">Select Work Item Type</option>\n            {Object.values(WorkItemType).map((type) => (\n                <option key={type} value={type}>{type}</option>\n            ))}\n            </select>\n        </div>\n\n        {/* Conditional fields for Issue or Deliverable */}\n        {workItemType === WorkItemType.Issue && (\n          <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Issue Type:\n            </label>\n            <select\n                className={selectStyles}\n                value={issueType}\n                onChange={(e) => setIssueType(e.target.value)}\n            >\n                <option value=\"\">Select Issue Type</option>\n                {issueTypes.map((type) => (\n                <option key={type.id} value={type.name}>\n                    {IssueTypeLabels[type.name] || type.name}\n                </option>\n                ))}\n            </select>\n          </div>\n        )}\n\n        {workItemType === WorkItemType.Deliverable && (\n          <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Deliverable Type:\n            </label>\n            <select\n                className={selectStyles}\n                value={deliverableType}\n                onChange={(e) => setDeliverableType(e.target.value)}\n            >\n                <option value=\"\">Select Deliverable Type</option>\n                {deliverableTypes.map((type) => (\n                <option key={type.id} value={type.name}>\n                    {DeliverableTypeLabels[type.name] || type.name}\n                </option>\n                ))}\n            </select>\n          </div>\n        )}\n\n        {/* Common Fields */}\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Title:\n            </label>\n            <input\n                type=\"text\"\n                className={inputStyles}\n                placeholder=\"Title\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n            />\n        </div>\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Description:\n            </label>\n            <textarea\n                className={inputStyles}\n                placeholder=\"Description\"\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n            />\n        </div>\n\n        {workItemType === WorkItemType.Issue && (\n          <>\n            <div>\n                <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                    Root Cause:\n                </label>\n                <textarea\n                    className={inputStyles}\n                    placeholder=\"Root Cause\"\n                    value={rootCause}\n                    onChange={(e) => setRootCause(e.target.value)}\n                />\n            </div>\n            <div>\n                <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                    Corrective Action:\n                </label>\n                <textarea\n                    className={inputStyles}\n                    placeholder=\"Corrective Action\"\n                    value={correctiveAction}\n                    onChange={(e) => setCorrectiveAction(e.target.value)}\n                />\n            </div>\n          </>\n        )}\n\n        {/* Status & Priority */}\n        <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2 sm:gap-2\">\n          <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Status:\n            </label>\n            <select\n                className={selectStyles}\n                value={status}\n                onChange={(e) => setStatus(e.target.value as Status)}\n            >\n                <option value=\"\">Select Status</option>\n                {Object.values(Status).map((s) => (\n                <option key={s} value={s}>\n                  {StatusLabels[s]}\n                </option>\n                ))}\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Priority:\n            </label>\n            <select\n                className={selectStyles}\n                value={priority}\n                onChange={(e) => setPriority(e.target.value as Priority)}\n            >\n                <option value=\"\">Select Priority</option>\n                {Object.values(Priority).map((p) => (\n                <option key={p} value={p}>{p}</option>\n                ))}\n            </select>\n          </div>\n        </div>\n\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Tags:\n            </label>\n            <input\n                type=\"text\"\n                className={inputStyles}\n                placeholder=\"Tags (comma separated)\"\n                value={tags}\n                onChange={(e) => setTags(e.target.value)}\n            />\n        </div>\n\n        {/* Dates */}\n        <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2 sm:gap-2\">\n          <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n              Date Opened:\n            </label>\n            <input type=\"date\" className={inputStyles} value={dateOpened} onChange={(e) => setDateOpened(e.target.value)} />\n          </div>\n          <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n              Due Date:\n            </label>\n            <input type=\"date\" className={inputStyles} value={dueDate} onChange={(e) => setDueDate(e.target.value)} />\n          </div>\n          <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n              Estimated Completion:\n            </label>\n            <input type=\"date\" className={inputStyles} value={estimatedCompletionDate} onChange={(e) => setEstimatedCompletionDate(e.target.value)} />\n          </div>\n          <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n              Actual Completion:\n            </label>\n            <input type=\"date\" className={inputStyles} value={actualCompletionDate} onChange={(e) => setActualCompletionDate(e.target.value)} />\n          </div>\n        </div>\n\n        {/* Percent Complete */}\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Percent Complete:\n            </label>\n            <input\n            type=\"number\"\n            className={inputStyles}\n            placeholder=\"Percent Complete\"\n            value={percentComplete}\n            onChange={(e) => setPercentComplete(Number(e.target.value))}\n            min={0}\n            max={100}\n            />\n        </div>\n\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Current Status:\n            </label>\n            <input\n            type=\"text\"\n            className={inputStyles}\n            placeholder=\"Current Status\"\n            value={inputStatus}\n            onChange={(e) => setInputStatus(e.target.value)}\n            />\n        </div>\n\n        <div>\n          <label className=\"block text-sm text-gray-600 dark:text-gray-300 mb-1\">\n            Affected Part(s):\n          </label>\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              className={inputStyles}\n              placeholder=\"Search parts...\"\n              value={partSearchQuery}\n              onChange={(e) => setPartSearchQuery(e.target.value)}\n              onFocus={() => setPartSearchQuery(\"\")}\n            />\n            {partSearchQuery && (\n              <div className=\"absolute z-10 mt-1 w-full max-h-60 overflow-auto rounded-md border border-gray-300 bg-white shadow-lg dark:border-gray-700 dark:bg-dark-secondary\">\n                {parts\n                  .filter((part) => {\n                    const searchLower = partSearchQuery.toLowerCase();\n                    return (\n                      part.code.toLowerCase().includes(searchLower) ||\n                      part.partName.toLowerCase().includes(searchLower)\n                    );\n                  })\n                  .slice(0, 10)\n                  .map((part) => {\n                    const isSelected = partIds.includes(part.id);\n                    return (\n                      <div\n                        key={part.id}\n                        className={`cursor-pointer px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                          isSelected ? \"bg-blue-100 dark:bg-blue-900\" : \"\"\n                        }`}\n                        onClick={() => {\n                          if (isSelected) {\n                            setPartIds(partIds.filter((id) => id !== part.id));\n                          } else {\n                            setPartIds([...partIds, part.id]);\n                          }\n                          setPartSearchQuery(\"\");\n                        }}\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm font-medium dark:text-white\">\n                            {part.code}: {part.partName}\n                          </span>\n                          {isSelected && <span className=\"text-xs text-blue-600 dark:text-blue-400\">✓</span>}\n                        </div>\n                      </div>\n                    );\n                  })}\n              </div>\n            )}\n          </div>\n          {partIds.length > 0 && (\n            <div className=\"mt-2 flex flex-wrap gap-2\">\n              {partIds.map((partId) => {\n                const part = parts.find((p) => p.id === partId);\n                if (!part) return null;\n                return (\n                  <span\n                    key={partId}\n                    className=\"inline-flex items-center gap-1 rounded-full bg-blue-100 px-3 py-1 text-sm text-blue-800 dark:bg-blue-900 dark:text-blue-200\"\n                  >\n                    {part.code}: {part.partName}\n                    <button\n                      type=\"button\"\n                      onClick={() => setPartIds(partIds.filter((id) => id !== partId))}\n                      className=\"ml-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200\"\n                    >\n                      ×\n                    </button>\n                  </span>\n                );\n              })}\n            </div>\n          )}\n        </div>\n        <div>\n          <label className=\"block text-sm text-gray-600 dark:text-gray-300 mb-1\">\n            Dependencies:\n          </label>\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              className={inputStyles}\n              placeholder=\"Search work items...\"\n              value={dependencySearchQuery}\n              onChange={(e) => setDependencySearchQuery(e.target.value)}\n              onFocus={() => setDependencySearchQuery(\"\")}\n            />\n            {dependencySearchQuery && (\n              <div className=\"absolute z-10 mt-1 w-full max-h-60 overflow-auto rounded-md border border-gray-300 bg-white shadow-lg dark:border-gray-700 dark:bg-dark-secondary\">\n                {allWorkItems\n                  .filter((wi) => {\n                    const searchLower = dependencySearchQuery.toLowerCase();\n                    return (\n                      wi.id !== workItem?.id &&\n                      (wi.title.toLowerCase().includes(searchLower) ||\n                        wi.id.toString().includes(searchLower) ||\n                        wi.workItemType.toLowerCase().includes(searchLower))\n                    );\n                  })\n                  .slice(0, 10)\n                  .map((wi) => {\n                    const isSelected = dependencyWorkItemIds.includes(wi.id);\n                    const prefix = wi.workItemType === \"Deliverable\" ? \"D\" : wi.workItemType === \"Issue\" ? \"I\" : \"T\";\n                    return (\n                      <div\n                        key={wi.id}\n                        className={`cursor-pointer px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                          isSelected ? \"bg-blue-100 dark:bg-blue-900\" : \"\"\n                        }`}\n                        onClick={() => {\n                          if (isSelected) {\n                            setDependencyWorkItemIds(dependencyWorkItemIds.filter((id) => id !== wi.id));\n                          } else {\n                            setDependencyWorkItemIds([...dependencyWorkItemIds, wi.id]);\n                          }\n                          setDependencySearchQuery(\"\");\n                        }}\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm font-medium dark:text-white\">\n                            {prefix}{wi.id}: {wi.title}\n                          </span>\n                          {isSelected && <span className=\"text-xs text-blue-600 dark:text-blue-400\">✓</span>}\n                        </div>\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                          {wi.workItemType} • {wi.status}\n                        </div>\n                      </div>\n                    );\n                  })}\n              </div>\n            )}\n          </div>\n          {dependencyWorkItemIds.length > 0 && (\n            <div className=\"mt-2 flex flex-wrap gap-2\">\n              {dependencyWorkItemIds.map((depId) => {\n                // Try to find the work item in allWorkItems first\n                const dep = allWorkItems.find((wi) => wi.id === depId);\n                if (!dep) {\n                  // Fallback: try to find in workItem.dependencies if not in allWorkItems\n                  const dependency = workItem?.dependencies?.find((d) => d.dependencyWorkItemId === depId);\n                  if (dependency?.dependencyWorkItem) {\n                    const depWorkItem = dependency.dependencyWorkItem;\n                    const prefix = depWorkItem.workItemType === \"Deliverable\" ? \"D\" : depWorkItem.workItemType === \"Issue\" ? \"I\" : \"T\";\n                    return (\n                      <span\n                        key={depId}\n                        className=\"inline-flex items-center gap-1 rounded-full bg-blue-100 px-3 py-1 text-sm text-blue-800 dark:bg-blue-900 dark:text-blue-200\"\n                      >\n                        {prefix}{depWorkItem.id}: {depWorkItem.title}\n                        <button\n                          type=\"button\"\n                          onClick={() => setDependencyWorkItemIds(dependencyWorkItemIds.filter((id) => id !== depId))}\n                          className=\"ml-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200\"\n                        >\n                          ×\n                        </button>\n                      </span>\n                    );\n                  }\n                  // If still not found, show just the ID\n                  return (\n                    <span\n                      key={depId}\n                      className=\"inline-flex items-center gap-1 rounded-full bg-blue-100 px-3 py-1 text-sm text-blue-800 dark:bg-blue-900 dark:text-blue-200\"\n                    >\n                      ID: {depId}\n                      <button\n                        type=\"button\"\n                        onClick={() => setDependencyWorkItemIds(dependencyWorkItemIds.filter((id) => id !== depId))}\n                        className=\"ml-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200\"\n                      >\n                        ×\n                      </button>\n                    </span>\n                  );\n                }\n                const prefix = dep.workItemType === \"Deliverable\" ? \"D\" : dep.workItemType === \"Issue\" ? \"I\" : \"T\";\n                return (\n                  <span\n                    key={depId}\n                    className=\"inline-flex items-center gap-1 rounded-full bg-blue-100 px-3 py-1 text-sm text-blue-800 dark:bg-blue-900 dark:text-blue-200\"\n                  >\n                    {prefix}{dep.id}: {dep.title}\n                    <button\n                      type=\"button\"\n                      onClick={() => setDependencyWorkItemIds(dependencyWorkItemIds.filter((id) => id !== depId))}\n                      className=\"ml-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200\"\n                    >\n                      ×\n                    </button>\n                  </span>\n                );\n              })}\n            </div>\n          )}\n        </div>\n        <div>\n          <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n              Program:\n          </label>\n          <select\n            className={inputStyles}\n            value={programId}\n            onChange={(e) => {\n              setProgramId(e.target.value);\n              const selected = programs.find((p) => p.id === Number(e.target.value));\n              setProgramName(selected?.name || \"\");\n            }}\n            disabled={programsLoading}\n          >\n            <option value=\"\">Select Program</option>\n            {programs.map((program) => (\n              <option key={program.id} value={program.id}>\n                {program.name}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div>\n          <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n              Milestone:\n          </label>\n          <select\n            className={inputStyles}\n            value={dueByMilestoneId}\n            onChange={(e) => {\n              setDueByMilestoneId(e.target.value);\n              const selected = milestones.find((p) => p.id === Number(e.target.value));\n              setMilestoneName(selected?.name || \"\");\n            }}\n            disabled={milestonesLoading}\n          >\n            <option value=\"\">Select Milestone</option>\n            {milestones.map((milestone) => (\n              <option key={milestone.id} value={milestone.id}>\n                {milestone.name}\n              </option>\n            ))}\n          </select>\n        </div>\n        \n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Author:\n            </label>\n            <select\n              className={inputStyles}\n              value={authorUserId}\n              onChange={(e) => {\n                setAuthorUserId(e.target.value);\n                const selected = users.find((u) => u.id === e.target.value);\n                setAuthorUserName(selected?.name || \"\");\n              }}\n              disabled={usersLoading}\n            >\n              <option value=\"\">Select Author User</option>\n              {users.map((user) => (\n                <option key={user.id} value={user.id}>\n                  {user.name} ({user.username})\n                </option>\n              ))}\n            </select>\n        </div>\n\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Assignee:\n            </label>\n            <select\n              className={inputStyles}\n              value={assignedUserId}\n              onChange={(e) => {\n                setAssignedUserId(e.target.value);\n                const selected = users.find((u) => u.id === e.target.value);\n                setAssignedUserName(selected?.name || \"\");\n              }}\n              disabled={usersLoading}\n            >\n              <option value=\"\">Select Assigned User</option>\n              {users.map((user) => (\n                <option key={user.id} value={user.id}>\n                  {user.name} ({user.username})\n                </option>\n              ))}\n            </select>\n        </div>\n\n        {/* Submit */}\n        <button\n          type=\"submit\"\n          className={`focus-offset-2 mt-4 flex w-full justify-center rounded-md border border-transparent bg-blue-primary px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600 ${\n            !isFormValid() || isSaving ? \"cursor-not-allowed opacity-50\" : \"\"\n          }`}\n          disabled={!isFormValid() || isSaving}\n        >\n          {isSaving ? `Updating ${workItemType}...` : `Update ${workItemType}`}\n        </button>\n        <button\n            type=\"button\"\n            onClick={handleDelete}\n            className={`focus-offset-2 mt-4 flex w-full justify-center rounded-md border border-transparent bg-red-500 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 ${\n                isDeleting ? \"cursor-not-allowed opacity-50\" : \"\"\n            }`}\n            disabled={isDeleting}\n        >\n            {isDeleting ? `Deleting ${workItemType}` : `Delete ${workItemType}`}\n        </button>\n      </form>\n    </Modal>\n  );\n};\n\nexport default ModalEditWorkItem;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1313, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/app/work-items/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState } from \"react\";\nimport { useAppSelector } from \"../../redux\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport {\n  useGetWorkItemByIdQuery,\n  useGetProgramsQuery,\n  useGetCommentsByWorkItemQuery,\n  useCreateCommentMutation,\n  useUpdateCommentMutation,\n  useDeleteCommentMutation,\n  useGetStatusLogsByWorkItemQuery,\n  useCreateStatusLogMutation,\n  useUpdateStatusLogMutation,\n  useDeleteStatusLogMutation,\n  useGetAttachmentsByWorkItemQuery,\n  useCreateAttachmentMutation,\n  useUpdateAttachmentMutation,\n  useDeleteAttachmentMutation,\n  useAddDependencyMutation,\n  useRemoveDependencyMutation,\n  Status,\n  Priority,\n  DeliverableTypeLabels,\n  IssueTypeLabels,\n  Part,\n  Comment as CommentType,\n  StatusLog as StatusLogType,\n  Attachment,\n  WorkItemDependency,\n} from \"@/state/api\";\nimport { format } from \"date-fns\";\nimport ModalEditWorkItem from \"@/components/ModalEditWorkItem\";\nimport { SquarePen, Calendar, Target, CheckCircle2, FileText, Tag, MessageSquareMore, User } from \"lucide-react\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useRouter } from \"next/navigation\";\n\ntype Props = {\n  params: Promise<{ id: string }>;\n};\n\nconst formatDateOnly = (dateString: string): string => {\n  if (!dateString) return \"\";\n  // Extract just the date portion (YYYY-MM-DD) from ISO string\n  const dateOnly = dateString.split('T')[0];\n  // Parse as local date to avoid timezone conversion\n  const [year, month, day] = dateOnly.split('-').map(Number);\n  const date = new Date(year, month - 1, day);\n  return format(date, \"MMM d, yyyy\");\n};\n\nconst getStatusColor = (status: Status) => {\n  switch (status) {\n    case Status.ToDo:\n      return \"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200\";\n    case Status.WorkInProgress:\n      return \"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\";\n    case Status.UnderReview:\n      return \"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200\";\n    case Status.Completed:\n      return \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\";\n    default:\n      return \"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200\";\n  }\n};\n\nconst getPriorityColor = (priority: Priority) => {\n  switch (priority) {\n    case Priority.Urgent:\n      return \"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200\";\n    case Priority.High:\n      return \"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200\";\n    case Priority.Medium:\n      return \"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200\";\n    case Priority.Low:\n      return \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\";\n    case Priority.Backlog:\n      return \"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200\";\n    default:\n      return \"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200\";\n  }\n};\n\n// Get user initials from name (first letter of first name and first letter of last name)\nconst getUserInitials = (user: { name?: string; username?: string } | null | undefined): string => {\n  if (!user) return '?';\n  \n  if (user.name) {\n    const names = user.name.trim().split(' ').filter(Boolean);\n    if (names.length >= 2) {\n      return `${names[0][0]}${names[names.length - 1][0]}`.toUpperCase();\n    }\n    // If only one name, take the first letter\n    if (names.length === 1 && names[0].length > 0) {\n      return names[0][0].toUpperCase();\n    }\n  }\n  \n  // Fallback to username if name is not available\n  if (user.username) {\n    return user.username.substring(0, 2).toUpperCase();\n  }\n  \n  return '?';\n};\n\nconst WorkItemDetailPage = ({ params }: Props) => {\n  const { id } = React.use(params);\n  const workItemId = Number(id);\n  const router = useRouter();\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [newCommentText, setNewCommentText] = useState(\"\");\n  const [editingCommentId, setEditingCommentId] = useState<number | null>(null);\n  const [editingCommentText, setEditingCommentText] = useState(\"\");\n  const [newStatusText, setNewStatusText] = useState(\"\");\n  const [editingStatusLogId, setEditingStatusLogId] = useState<number | null>(null);\n  const [editingStatusText, setEditingStatusText] = useState(\"\");\n  const [newAttachmentFileUrl, setNewAttachmentFileUrl] = useState(\"\");\n  const [newAttachmentFileName, setNewAttachmentFileName] = useState(\"\");\n  const [editingAttachmentId, setEditingAttachmentId] = useState<number | null>(null);\n  const [editingAttachmentFileName, setEditingAttachmentFileName] = useState(\"\");\n  const [editingAttachmentFileUrl, setEditingAttachmentFileUrl] = useState(\"\");\n\n  const { data: workItem, isLoading, isError, refetch: refetchWorkItem } = useGetWorkItemByIdQuery(workItemId);\n  const { data: programs = [] } = useGetProgramsQuery();\n  const { data: comments = [], isFetching: isCommentsLoading, refetch: refetchComments } = useGetCommentsByWorkItemQuery(workItemId);\n  const { data: statusLogs = [], isFetching: isStatusLogsLoading, refetch: refetchStatusLogs } = useGetStatusLogsByWorkItemQuery(workItemId);\n  const { data: attachments = [], isFetching: isAttachmentsLoading, refetch: refetchAttachments } = useGetAttachmentsByWorkItemQuery(workItemId);\n  const [createComment, { isLoading: isCreatingComment }] = useCreateCommentMutation();\n  const [updateComment, { isLoading: isUpdatingComment }] = useUpdateCommentMutation();\n  const [deleteComment, { isLoading: isDeletingComment }] = useDeleteCommentMutation();\n  const [createStatusLog, { isLoading: isCreatingStatusLog }] = useCreateStatusLogMutation();\n  const [updateStatusLog, { isLoading: isUpdatingStatusLog }] = useUpdateStatusLogMutation();\n  const [deleteStatusLog, { isLoading: isDeletingStatusLog }] = useDeleteStatusLogMutation();\n  const [createAttachment, { isLoading: isCreatingAttachment }] = useCreateAttachmentMutation();\n  const [updateAttachment, { isLoading: isUpdatingAttachment }] = useUpdateAttachmentMutation();\n  const [deleteAttachment, { isLoading: isDeletingAttachment }] = useDeleteAttachmentMutation();\n  const [addDependency, { isLoading: isAddingDependency }] = useAddDependencyMutation();\n  const [removeDependency, { isLoading: isRemovingDependency }] = useRemoveDependencyMutation();\n  const isDarkMode = useAppSelector((state) => state.global.isDarkMode);\n  const { user: authUser } = useAuth();\n\n  const resetCommentState = () => {\n    setNewCommentText(\"\");\n    setEditingCommentId(null);\n    setEditingCommentText(\"\");\n  };\n\n  const resetStatusLogState = () => {\n    setNewStatusText(\"\");\n    setEditingStatusLogId(null);\n    setEditingStatusText(\"\");\n  };\n\n  const handleSubmitComment = async () => {\n    if (!authUser || !newCommentText.trim()) return;\n    try {\n      await createComment({\n        workItemId,\n        text: newCommentText.trim(),\n        commenterUserId: authUser.id,\n      }).unwrap();\n      resetCommentState();\n      await refetchComments();\n      refetchWorkItem();\n    } catch (error) {\n      console.error(\"Failed to create comment:\", error);\n    }\n  };\n\n  const handleStartEdit = (comment: CommentType) => {\n    setEditingCommentId(comment.id);\n    setEditingCommentText(comment.text);\n  };\n\n  const handleCancelEdit = () => {\n    setEditingCommentId(null);\n    setEditingCommentText(\"\");\n  };\n\n  const handleSaveEdit = async () => {\n    if (editingCommentId === null || !authUser || !editingCommentText.trim()) return;\n    try {\n      await updateComment({\n        workItemId,\n        commentId: editingCommentId,\n        text: editingCommentText.trim(),\n        requesterUserId: authUser.id,\n      }).unwrap();\n      resetCommentState();\n      await refetchComments();\n      refetchWorkItem();\n    } catch (error) {\n      console.error(\"Failed to update comment:\", error);\n    }\n  };\n\n  const handleDeleteComment = async (comment: CommentType) => {\n    if (!authUser) return;\n    if (!window.confirm(\"Delete this comment?\")) return;\n    try {\n      await deleteComment({\n        workItemId,\n        commentId: comment.id,\n        requesterUserId: authUser.id,\n      }).unwrap();\n      await refetchComments();\n      refetchWorkItem();\n    } catch (error) {\n      console.error(\"Failed to delete comment:\", error);\n    }\n  };\n\n  const handleSubmitStatusLog = async () => {\n    if (!authUser || !newStatusText.trim()) return;\n    try {\n      await createStatusLog({\n        workItemId,\n        status: newStatusText.trim(),\n        engineerUserId: authUser.id,\n      }).unwrap();\n      resetStatusLogState();\n      await refetchStatusLogs();\n      refetchWorkItem();\n    } catch (error) {\n      console.error(\"Failed to create status log:\", error);\n    }\n  };\n\n  const handleStartEditStatusLog = (statusLog: StatusLogType) => {\n    setEditingStatusLogId(statusLog.id);\n    setEditingStatusText(statusLog.status);\n  };\n\n  const handleCancelEditStatusLog = () => {\n    setEditingStatusLogId(null);\n    setEditingStatusText(\"\");\n  };\n\n  const handleSaveEditStatusLog = async () => {\n    if (editingStatusLogId === null || !authUser || !editingStatusText.trim()) return;\n    try {\n      await updateStatusLog({\n        workItemId,\n        statusLogId: editingStatusLogId,\n        status: editingStatusText.trim(),\n        requesterUserId: authUser.id,\n      }).unwrap();\n      resetStatusLogState();\n      await refetchStatusLogs();\n      refetchWorkItem();\n    } catch (error) {\n      console.error(\"Failed to update status log:\", error);\n    }\n  };\n\n  const handleDeleteStatusLog = async (statusLog: StatusLogType) => {\n    if (!authUser) return;\n    if (!window.confirm(\"Delete this status update?\")) return;\n    try {\n      await deleteStatusLog({\n        workItemId,\n        statusLogId: statusLog.id,\n        requesterUserId: authUser.id,\n      }).unwrap();\n      await refetchStatusLogs();\n      refetchWorkItem();\n    } catch (error) {\n      console.error(\"Failed to delete status log:\", error);\n    }\n  };\n\n  const handleSubmitAttachment = async () => {\n    if (!authUser || !newAttachmentFileUrl.trim() || !newAttachmentFileName.trim()) return;\n    try {\n      await createAttachment({\n        workItemId,\n        fileUrl: newAttachmentFileUrl.trim(),\n        fileName: newAttachmentFileName.trim(),\n        uploadedByUserId: authUser.id,\n      }).unwrap();\n      setNewAttachmentFileUrl(\"\");\n      setNewAttachmentFileName(\"\");\n      await refetchAttachments();\n      refetchWorkItem();\n    } catch (error) {\n      console.error(\"Failed to create attachment:\", error);\n    }\n  };\n\n  const handleStartEditAttachment = (attachment: Attachment) => {\n    setEditingAttachmentId(attachment.id);\n    setEditingAttachmentFileName(attachment.fileName);\n    setEditingAttachmentFileUrl(attachment.fileUrl);\n  };\n\n  const handleCancelEditAttachment = () => {\n    setEditingAttachmentId(null);\n    setEditingAttachmentFileName(\"\");\n    setEditingAttachmentFileUrl(\"\");\n  };\n\n  const handleSaveEditAttachment = async () => {\n    if (editingAttachmentId === null || !authUser || !editingAttachmentFileName.trim() || !editingAttachmentFileUrl.trim()) return;\n    try {\n      await updateAttachment({\n        workItemId,\n        attachmentId: editingAttachmentId,\n        fileName: editingAttachmentFileName.trim(),\n        fileUrl: editingAttachmentFileUrl.trim(),\n        requesterUserId: authUser.id,\n      }).unwrap();\n      setEditingAttachmentId(null);\n      setEditingAttachmentFileName(\"\");\n      setEditingAttachmentFileUrl(\"\");\n      await refetchAttachments();\n      refetchWorkItem();\n    } catch (error) {\n      console.error(\"Failed to update attachment:\", error);\n    }\n  };\n\n  const handleDeleteAttachment = async (attachment: Attachment) => {\n    if (!authUser) return;\n    if (!window.confirm(\"Delete this attachment?\")) return;\n    try {\n      await deleteAttachment({\n        workItemId,\n        attachmentId: attachment.id,\n        requesterUserId: authUser.id,\n      }).unwrap();\n      await refetchAttachments();\n      refetchWorkItem();\n    } catch (error) {\n      console.error(\"Failed to delete attachment:\", error);\n    }\n  };\n\n  const handleRemoveDependency = async (dependency: WorkItemDependency) => {\n    if (!authUser) return;\n    try {\n      await removeDependency({\n        workItemId: workItemId,\n        dependencyId: dependency.id,\n      }).unwrap();\n      await refetchWorkItem();\n    } catch (error) {\n      console.error(\"Failed to remove dependency:\", error);\n    }\n  };\n\n  if (isLoading) return <div className=\"p-8\">Loading work item...</div>;\n  if (isError || !workItem) return <div className=\"p-8\">Error loading work item or work item not found</div>;\n\n  return (\n    <div className=\"flex w-full flex-col p-8\">\n      <ModalEditWorkItem\n        isOpen={isEditModalOpen}\n        onClose={() => setIsEditModalOpen(false)}\n        workItem={workItem}\n      />\n\n      {/* Header with Work Item Type and Title */}\n      <div className=\"mb-6 flex items-center justify-between\">\n        <div>\n          <div className=\"flex items-center gap-3 mb-2\">\n            <h1 className=\"text-2xl font-semibold dark:text-white\">\n              {workItem.title}\n            </h1>            \n            <span className=\"inline-flex items-center rounded-full bg-purple-100 px-3 py-1 text-sm font-semibold leading-5 text-purple-800 dark:bg-purple-900 dark:text-purple-200\">\n              {workItem.workItemType}\n            </span>\n          </div>\n          <h2 className=\"text-lg font-medium text-gray-600 dark:text-gray-400 ml-0 mt-1\">\n            ID: {workItem.workItemType === \"Deliverable\"\n              ? \"D\"\n              : workItem.workItemType === \"Issue\"\n              ? \"I\"\n              : \"T\"}{workItem.id}\n          </h2>\n        </div>\n        \n        {/* Edit Button */}\n        <button\n          onClick={() => setIsEditModalOpen(true)}\n          className=\"flex items-center rounded-md bg-gray-300 px-3 py-2 text-sm font-medium text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-dark-tertiary dark:text-white dark:hover:bg-gray-600\"\n        >\n          <SquarePen className=\"mr-2 h-4 w-4\" />\n          Edit Work Item\n        </button>\n      </div>\n\n      {/* Main Information */}\n      <div className=\"mb-8 rounded-lg bg-white p-6 shadow dark:bg-dark-secondary\">\n        <h3 className=\"mb-4 text-lg font-semibold dark:text-white\">Work Item Details</h3>\n        \n        {/* Description */}\n        {workItem.description && (\n          <div className=\"mb-6\">\n            <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Description:</span>\n            <p className=\"text-gray-700 dark:text-gray-300 mt-1 whitespace-pre-wrap\">{workItem.description}</p>\n          </div>\n        )}\n\n        {/* Root Cause and Corrective Action - only show if issue */}\n        {workItem.issueDetail && (workItem.issueDetail.rootCause || workItem.issueDetail.correctiveAction) && (\n          <div className=\"mb-6 space-y-4\">\n            {workItem.issueDetail.rootCause && (\n              <div>\n                <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Root Cause:</span>\n                <p className=\"text-gray-700 dark:text-gray-300 mt-1 whitespace-pre-wrap\">\n                  {workItem.issueDetail.rootCause}\n                </p>\n              </div>\n            )}\n\n            {workItem.issueDetail.correctiveAction && (\n              <div>\n                <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Corrective Action:</span>\n                <p className=\"text-gray-700 dark:text-gray-300 mt-1 whitespace-pre-wrap\">\n                  {workItem.issueDetail.correctiveAction}\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {/* Deliverable Type - only show if deliverable */}\n          {workItem.deliverableDetail && (\n            <div>\n              <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Deliverable Type:</span>\n              <p className=\"text-gray-900 dark:text-gray-100 mt-1\">\n                {(() => {\n                  const type = workItem.deliverableDetail.deliverableType;\n                  if (typeof type === 'string') {\n                    return DeliverableTypeLabels[type] || type;\n                  }\n                  if (type && typeof type === 'object' && 'name' in type) {\n                    const typeName = (type as { name: string }).name;\n                    return DeliverableTypeLabels[typeName] || typeName;\n                  }\n                  return 'Unknown';\n                })()}\n              </p>\n            </div>\n          )}\n\n          {/* Issue Type - only show if issue */}\n          {workItem.issueDetail && (\n            <div>\n              <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Issue Type:</span>\n              <p className=\"text-gray-900 dark:text-gray-100 mt-1\">\n                {(() => {\n                  const type = workItem.issueDetail.issueType;\n                  if (typeof type === 'string') {\n                    return IssueTypeLabels[type] || type;\n                  }\n                  if (type && typeof type === 'object' && 'name' in type) {\n                    const typeName = (type as { name: string }).name;\n                    return IssueTypeLabels[typeName] || typeName;\n                  }\n                  return 'Unknown';\n                })()}\n              </p>\n            </div>\n          )}\n          {/* Status */}\n          <div>\n            <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Status:</span>\n            <div className=\"mt-1\">\n              <span className={`inline-flex rounded-full px-3 py-1 text-sm font-semibold leading-5 ${getStatusColor(workItem.status)}`}>\n                {workItem.status}\n              </span>\n            </div>\n          </div>\n\n          {/* Priority */}\n          <div>\n            <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Priority:</span>\n            <div className=\"mt-1\">\n              <span className={`inline-flex rounded-full px-3 py-1 text-sm font-semibold leading-5 ${getPriorityColor(workItem.priority)}`}>\n                {workItem.priority}\n              </span>\n            </div>\n          </div>\n\n          {/* Tags */}\n          {workItem.tags && (\n            <div className=\"md:col-span-2\">\n              <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Tags:</span>\n              <p className=\"text-gray-900 dark:text-gray-100 mt-1\">{workItem.tags}</p>\n            </div>\n          )}\n\n          {/* Date Opened */}\n          <div>\n            <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Date Opened:</span>\n            <p className=\"text-gray-900 dark:text-gray-100 mt-1\">\n              {format(new Date(workItem.dateOpened), \"PPP\")}\n            </p>\n          </div>\n\n          {/* Due Date */}\n          <div>\n            <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Due Date:</span>\n            <p className=\"text-gray-900 dark:text-gray-100 mt-1\">\n              {format(new Date(workItem.dueDate), \"PPP\")}\n            </p>\n          </div>\n\n          {/* Estimated Completion Date */}\n          <div>\n            <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Estimated Completion Date:</span>\n            <p className=\"text-gray-900 dark:text-gray-100 mt-1\">\n              {format(new Date(workItem.estimatedCompletionDate), \"PPP\")}\n            </p>\n          </div>\n\n          {/* Actual Completion Date */}\n          {workItem.actualCompletionDate && (\n            <div>\n              <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Actual Completion Date:</span>\n              <p className=\"text-gray-900 dark:text-gray-100 mt-1\">\n                {format(new Date(workItem.actualCompletionDate), \"PPP\")}\n              </p>\n            </div>\n          )}\n\n          {/* Percent Complete */}\n          <div>\n            <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Progress:</span>\n            <div className=\"mt-2\">\n              <div className=\"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700\">\n                <div \n                  className=\"bg-blue-600 h-2.5 rounded-full\" \n                  style={{ width: `${workItem.percentComplete}%` }}\n                ></div>\n              </div>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">{workItem.percentComplete}%</p>\n            </div>\n          </div>\n\n          {/* Program */}\n          <div>\n            <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Program:</span>\n            <p className=\"text-gray-900 dark:text-gray-100 mt-1\">\n              {workItem.program?.name || \"N/A\"}\n            </p>\n          </div>\n\n          {/* Due By Milestone */}\n          <div>\n            <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Due By Milestone:</span>\n            <p className=\"text-gray-900 dark:text-gray-100 mt-1\">\n              {workItem.dueByMilestone?.name || \"N/A\"}\n            </p>\n            {workItem.dueByMilestone && (\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                {format(new Date(workItem.dueByMilestone.date), \"PPP\")}\n              </p>\n            )}\n          </div>\n\n          {/* Author */}\n          <div>\n            <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Author:</span>\n            {workItem.authorUser ? (\n              <Link \n                href={`/users/${workItem.authorUser.id}`}\n                className=\"flex items-center gap-3 mt-2 hover:opacity-80 transition-opacity cursor-pointer\"\n              >\n                {workItem.authorUser.profilePictureUrl ? (\n                  <Image\n                    src={workItem.authorUser.profilePictureUrl ? `/images/${workItem.authorUser.profilePictureUrl}` : '/placeholder.png'}\n                    alt={workItem.authorUser.username}\n                    width={40}\n                    height={40}\n                    className=\"rounded-full\"\n                  />\n                ) : (\n                  <div className=\"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 text-sm font-medium dark:bg-gray-700 dark:text-gray-300\">\n                    {getUserInitials(workItem.authorUser)}\n                  </div>\n                )}\n                <div>\n                  <p className=\"text-gray-900 dark:text-gray-100\">\n                    {workItem.authorUser.name || workItem.authorUser.username || \"Unknown\"}\n                  </p>\n                  {workItem.authorUser.email && (\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{workItem.authorUser.email}</p>\n                  )}\n                </div>\n              </Link>\n            ) : (\n              <div className=\"flex items-center gap-3 mt-2\">\n                <div className=\"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 text-sm font-medium dark:bg-gray-700 dark:text-gray-300\">\n                  ?\n                </div>\n                <div>\n                  <p className=\"text-gray-900 dark:text-gray-100\">Unknown</p>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Assignee */}\n          <div>\n            <span className=\"text-sm font-semibold text-gray-600 dark:text-gray-400\">Assignee:</span>\n            {workItem.assigneeUser ? (\n              <Link \n                href={`/users/${workItem.assigneeUser.id}`}\n                className=\"flex items-center gap-3 mt-2 hover:opacity-80 transition-opacity cursor-pointer\"\n              >\n                {workItem.assigneeUser.profilePictureUrl ? (\n                  <Image\n                    src={workItem.assigneeUser.profilePictureUrl ? `/images/${workItem.assigneeUser.profilePictureUrl}` : '/placeholder.png'}\n                    alt={workItem.assigneeUser.username}\n                    width={40}\n                    height={40}\n                    className=\"rounded-full\"\n                  />\n                ) : (\n                  <div className=\"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 text-sm font-medium dark:bg-gray-700 dark:text-gray-300\">\n                    {getUserInitials(workItem.assigneeUser)}\n                  </div>\n                )}\n                <div>\n                  <p className=\"text-gray-900 dark:text-gray-100\">\n                    {workItem.assigneeUser.name || workItem.assigneeUser.username || \"Unassigned\"}\n                  </p>\n                  {workItem.assigneeUser.email && (\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{workItem.assigneeUser.email}</p>\n                  )}\n                </div>\n              </Link>\n            ) : (\n              <div className=\"flex items-center gap-3 mt-2\">\n                <div className=\"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 text-sm font-medium dark:bg-gray-700 dark:text-gray-300\">\n                  ?\n                </div>\n                <div>\n                  <p className=\"text-gray-900 dark:text-gray-100\">Unassigned</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Status Log */}\n      <div className=\"mb-8 rounded-lg bg-white p-6 shadow dark:bg-dark-secondary\">\n        <div className=\"mb-4 flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold dark:text-white\">Status Log</h3>\n          <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n            {statusLogs.length} {statusLogs.length === 1 ? \"entry\" : \"entries\"}\n          </span>\n        </div>\n\n        {isStatusLogsLoading ? (\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">Loading status logs...</p>\n        ) : statusLogs.length === 0 ? (\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">No status logs yet.</p>\n        ) : (\n          <div className=\"space-y-4\">\n            {statusLogs.map((statusLog) => {\n              const isOwnStatusLog = authUser?.id === statusLog.engineerUserId;\n              const engineerName =\n                statusLog.engineerUser?.name ||\n                statusLog.engineerUser?.username ||\n                `User ${statusLog.engineerUserId}`;\n              const formattedDate = format(new Date(statusLog.dateLogged), \"PPpp\");\n\n              return (\n                <div key={statusLog.id} className=\"rounded-md border border-gray-200 p-4 dark:border-gray-700\">\n                  <div className=\"flex flex-wrap items-center justify-between gap-2\">\n                    <div>\n                      <p className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">{engineerName}</p>\n                      <p className=\"text-xs text-gray-500 dark:text-neutral-400\">{formattedDate}</p>\n                    </div>\n                    {isOwnStatusLog && (\n                      <div className=\"flex gap-2 text-xs\">\n                        <button\n                          className=\"rounded-md border border-gray-300 px-2 py-1 text-gray-600 hover:bg-gray-100 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700\"\n                          onClick={() => handleStartEditStatusLog(statusLog)}\n                        >\n                          Edit\n                        </button>\n                        <button\n                          className=\"rounded-md border border-red-300 px-2 py-1 text-red-600 hover:bg-red-50 dark:border-red-700 dark:text-red-300 dark:hover:bg-red-900/30\"\n                          onClick={() => handleDeleteStatusLog(statusLog)}\n                          disabled={isDeletingStatusLog}\n                        >\n                          Delete\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                  {editingStatusLogId === statusLog.id ? (\n                    <div className=\"mt-3 space-y-2\">\n                      <textarea\n                        className=\"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-gray-700 dark:bg-dark-secondary dark:text-white\"\n                        rows={3}\n                        value={editingStatusText}\n                        onChange={(e) => setEditingStatusText(e.target.value)}\n                      />\n                      <div className=\"flex gap-2\">\n                        <button\n                          className=\"rounded-md bg-blue-600 px-3 py-1 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-50\"\n                          onClick={handleSaveEditStatusLog}\n                          disabled={isUpdatingStatusLog}\n                        >\n                          Save\n                        </button>\n                        <button\n                          className=\"rounded-md border border-gray-300 px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700\"\n                          onClick={handleCancelEditStatusLog}\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    </div>\n                  ) : (\n                    <p className=\"mt-3 whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-200\">\n                      {statusLog.status}\n                    </p>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        <div className=\"mt-6 border-t border-gray-200 pt-4 dark:border-gray-700\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white\">Add a status update</h4>\n          {!authUser ? (\n            <p className=\"mt-2 text-sm text-gray-500 dark:text-neutral-400\">\n              Sign in to add status updates.\n            </p>\n          ) : (\n            <div className=\"mt-2 space-y-3\">\n              <textarea\n                className=\"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-gray-700 dark:bg-dark-secondary dark:text-white\"\n                rows={3}\n                placeholder=\"Provide a status update...\"\n                value={newStatusText}\n                onChange={(e) => setNewStatusText(e.target.value)}\n              />\n              <div className=\"flex justify-end\">\n                <button\n                  className=\"rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-50\"\n                  onClick={handleSubmitStatusLog}\n                  disabled={isCreatingStatusLog || !newStatusText.trim()}\n                >\n                  {isCreatingStatusLog ? \"Posting...\" : \"Post Status Update\"}\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Parts */}\n      {(workItem.partNumbers?.length ?? 0) > 0 && (\n        <div className=\"mb-8 rounded-lg bg-white p-6 shadow dark:bg-dark-secondary\">\n          <div className=\"mb-4 flex items-center justify-between\">\n            <h3 className=\"text-lg font-semibold dark:text-white\">Associated Parts</h3>\n            <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n              {workItem.partNumbers?.length ?? 0}{\" \"}\n              {(workItem.partNumbers?.length ?? 0) === 1 ? \"part\" : \"parts\"}\n            </span>\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3\">\n            {workItem.partNumbers?.map((link) => {\n              const part = link.part as Part | undefined;\n              const programName =\n                part?.program?.name ??\n                programs.find((program) => program.id === part?.programId)?.name ??\n                \"N/A\";\n\n              return (\n                <a\n                  key={link.id}\n                  href={part ? `/parts/${part.id}` : \"#\"}\n                  className={`group flex flex-col rounded-md border border-gray-200 p-4 shadow-sm transition hover:border-blue-500 hover:shadow-md dark:border-gray-700 dark:bg-dark-tertiary dark:hover:border-blue-400 ${\n                    part ? \"\" : \"pointer-events-none opacity-60\"\n                  }`}\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div>\n                      <h4 className=\"text-base font-semibold text-gray-900 transition group-hover:text-blue-600 dark:text-white\">\n                        {part ? `${part.partName} (${part.code})` : \"Unknown Part\"}\n                      </h4>\n                    </div>\n                    {part?.state && (\n                      <span className=\"rounded-full bg-blue-100 px-2 py-0.5 text-xs font-semibold text-blue-700 dark:bg-blue-900 dark:text-blue-200\">\n                        {part.state}\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"mt-3 space-y-1 text-sm text-gray-500 dark:text-neutral-400\">\n                    <p>Program: {programName}</p>\n                    <p>Level: {part?.level ?? \"N/A\"}</p>\n                    <p>Revision: {part?.revisionLevel ?? \"N/A\"}</p>\n                  </div>\n                </a>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* Dependencies */}\n      <div className=\"mb-8 rounded-lg bg-white p-6 shadow dark:bg-dark-secondary\">\n        <div className=\"mb-4 flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold dark:text-white\">Dependencies</h3>\n          <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n            {workItem?.dependencies?.length || 0}{\" \"}\n            {(workItem?.dependencies?.length || 0) === 1 ? \"dependency\" : \"dependencies\"}\n          </span>\n        </div>\n\n        {!workItem ? (\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">Loading dependencies...</p>\n        ) : !workItem.dependencies || workItem.dependencies.length === 0 ? (\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">No dependencies.</p>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {workItem.dependencies.map((dependency: WorkItemDependency) => {\n              const depWorkItem = dependency.dependencyWorkItem;\n              const isCompleted = depWorkItem.status === Status.Completed;\n              const workItemPrefix = depWorkItem.workItemType === \"Deliverable\" ? \"D\" : depWorkItem.workItemType === \"Issue\" ? \"I\" : \"T\";\n              \n              const formattedDateOpened = formatDateOnly(depWorkItem.dateOpened);\n              const formattedDueDate = formatDateOnly(depWorkItem.dueDate);\n              const formattedEstimatedCompletionDate = formatDateOnly(depWorkItem.estimatedCompletionDate || \"\");\n              const formattedActualCompletionDate = depWorkItem.actualCompletionDate ? formatDateOnly(depWorkItem.actualCompletionDate) : \"\";\n              \n              const numberOfComments = depWorkItem.comments?.length ?? 0;\n              const numberOfAttachments = depWorkItem.attachments?.length ?? 0;\n              \n              const workItemTagsSplit = depWorkItem.tags ? depWorkItem.tags.split(\",\").map(t => t.trim()).filter(Boolean) : [];\n              \n              const truncateText = (text: string, maxLength: number = 100) => {\n                if (!text || text.length <= maxLength) return text;\n                return text.substring(0, maxLength) + \"...\";\n              };\n\n              const PriorityTag = ({ priority }: { priority: Priority }) => (\n                <div\n                  className={`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold ${\n                    priority === \"Urgent\"\n                      ? \"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300\"\n                      : priority === \"High\"\n                        ? \"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300\"\n                        : priority === \"Medium\"\n                          ? \"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300\"\n                          : priority === \"Low\"\n                            ? \"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300\"\n                            : \"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300\"\n                  }`}\n                >\n                  {priority}\n                </div>\n              );\n\n              const WorkItemTypeBadge = () => {\n                const typeColors = {\n                  \"Deliverable\": \"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300\",\n                  \"Issue\": \"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300\",\n                  \"Task\": \"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300\",\n                };\n                return (\n                  <span className={`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${typeColors[depWorkItem.workItemType as keyof typeof typeColors] || typeColors.Task}`}>\n                    {workItemPrefix}{depWorkItem.id}\n                  </span>\n                );\n              };\n\n              return (\n                <div\n                  key={dependency.id}\n                  className=\"rounded-lg border border-gray-200 bg-white shadow-sm transition-all hover:shadow-md dark:border-gray-700 dark:bg-dark-secondary\"\n                >\n                  <div className=\"p-4\">\n                    {/* Header: Priority, Type Badge, and Remove Button */}\n                    <div className=\"mb-3 flex items-start justify-between gap-2\">\n                      <div className=\"flex flex-1 flex-wrap items-center gap-2\">\n                        {depWorkItem.priority && <PriorityTag priority={depWorkItem.priority} />}\n                        <WorkItemTypeBadge />\n                      </div>\n                      {authUser && (\n                        <button\n                          onClick={(e) => {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            handleRemoveDependency(dependency);\n                          }}\n                          disabled={isRemovingDependency}\n                          className=\"flex h-6 w-6 flex-shrink-0 items-center justify-center rounded text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30 disabled:opacity-50\"\n                          title=\"Remove dependency\"\n                        >\n                          ×\n                        </button>\n                      )}\n                    </div>\n\n                    {/* Title */}\n                    <h4 className=\"mb-2 line-clamp-2 text-sm font-semibold leading-tight dark:text-white\">\n                      <Link\n                        href={`/work-items/${depWorkItem.id}`}\n                        className=\"text-gray-900 hover:text-blue-600 dark:text-white dark:hover:text-blue-400\"\n                      >\n                        {depWorkItem.title}\n                      </Link>\n                    </h4>\n\n                    {/* Progress Bar */}\n                    {typeof depWorkItem.percentComplete === \"number\" && (\n                      <div className=\"mb-3\">\n                        <div className=\"mb-1 flex items-center justify-between\">\n                          <span className=\"text-xs font-medium text-gray-600 dark:text-gray-400\">Progress</span>\n                          <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">{depWorkItem.percentComplete}%</span>\n                        </div>\n                        <div className=\"h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700\">\n                          <div \n                            className=\"h-full bg-blue-600 transition-all dark:bg-blue-500\"\n                            style={{ width: `${depWorkItem.percentComplete}%` }}\n                          />\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Key Dates */}\n                    <div className=\"mb-3 space-y-1.5 text-xs\">\n                      {formattedEstimatedCompletionDate && (\n                        <div className=\"flex items-center gap-1.5 text-gray-600 dark:text-gray-400\">\n                          <Target size={14} className=\"flex-shrink-0 text-gray-400 dark:text-gray-500\" />\n                          <span className=\"font-medium\">Est. Completion:</span>\n                          <span className=\"text-gray-700 dark:text-gray-300\">{formattedEstimatedCompletionDate}</span>\n                        </div>\n                      )}\n                      {formattedDueDate && (\n                        <div className=\"flex items-center gap-1.5 text-gray-600 dark:text-gray-400\">\n                          <Calendar size={14} className=\"flex-shrink-0 text-gray-400 dark:text-gray-500\" />\n                          <span className=\"font-medium\">Due:</span>\n                          <span className=\"text-gray-700 dark:text-gray-300\">{formattedDueDate}</span>\n                        </div>\n                      )}\n                      {depWorkItem.status === \"Completed\" && formattedActualCompletionDate && (\n                        <div className=\"flex items-center gap-1.5 text-green-600 dark:text-green-400\">\n                          <CheckCircle2 size={14} className=\"flex-shrink-0\" />\n                          <span className=\"font-medium\">Completed:</span>\n                          <span>{formattedActualCompletionDate}</span>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Description (truncated) */}\n                    {depWorkItem.description && (\n                      <div className=\"mb-3\">\n                        <div className=\"flex items-start gap-1.5 text-xs text-gray-600 dark:text-gray-400\">\n                          <FileText size={14} className=\"mt-0.5 flex-shrink-0 text-gray-400 dark:text-gray-500\" />\n                          <p className=\"line-clamp-2 leading-relaxed\">{truncateText(depWorkItem.description, 120)}</p>\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Tags */}\n                    {workItemTagsSplit.length > 0 && (\n                      <div className=\"mb-3 flex flex-wrap items-center gap-1.5\">\n                        <Tag size={12} className=\"text-gray-400 dark:text-gray-500\" />\n                        {workItemTagsSplit.slice(0, 3).map((tag) => (\n                          <span\n                            key={tag}\n                            className=\"inline-flex items-center rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600 dark:bg-gray-700 dark:text-gray-400\"\n                          >\n                            {tag}\n                          </span>\n                        ))}\n                        {workItemTagsSplit.length > 3 && (\n                          <span className=\"text-xs text-gray-500 dark:text-gray-500\">+{workItemTagsSplit.length - 3}</span>\n                        )}\n                      </div>\n                    )}\n\n                    {/* Status (if not completed) */}\n                    {depWorkItem.status !== \"Completed\" && depWorkItem.inputStatus && (\n                      <div className=\"mb-3 text-xs\">\n                        <span className=\"text-gray-500 dark:text-gray-400\">Status: </span>\n                        <span className=\"font-medium text-gray-700 dark:text-gray-300\">{depWorkItem.inputStatus}</span>\n                      </div>\n                    )}\n\n                    {/* Warning if not completed */}\n                    {!isCompleted && (\n                      <div className=\"mb-3 text-xs text-yellow-600 dark:text-yellow-400 font-medium\">\n                        ⚠️ Must be completed first\n                      </div>\n                    )}\n\n                    {/* Divider */}\n                    <div className=\"my-3 border-t border-gray-200 dark:border-gray-700\" />\n\n                    {/* Footer: Users, Comments, Attachments */}\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex -space-x-2\">\n                        {[depWorkItem.assigneeUser, depWorkItem.authorUser].map((user, index) => {\n                          if (!user) return null;\n\n                          const uniqueKey = `${user.id}-${index}`;\n                          const role = index === 0 ? \"Assignee\" : \"Author\";\n                          const tooltip = `${role}: ${user.name || user.username}`;\n\n                          return user.profilePictureUrl ? (\n                            <button\n                              key={uniqueKey}\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                router.push(`/users/${user.id}`);\n                              }}\n                              className=\"relative h-7 w-7 cursor-pointer overflow-hidden rounded-full border-2 border-white ring-1 ring-gray-200 transition-all hover:z-10 hover:ring-2 hover:ring-blue-500 dark:border-dark-secondary dark:ring-gray-700\"\n                              title={tooltip}\n                            >\n                              <Image\n                                src={user.profilePictureUrl ? `/images/${user.profilePictureUrl}` : '/placeholder.png'}\n                                alt={user.username}\n                                width={28}\n                                height={28}\n                                className=\"h-full w-full object-cover\"\n                              />\n                            </button>\n                          ) : (\n                            <button\n                              key={uniqueKey}\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                router.push(`/users/${user.id}`);\n                              }}\n                              title={tooltip}\n                              className=\"relative flex h-7 w-7 cursor-pointer items-center justify-center rounded-full border-2 border-white bg-gradient-to-br from-gray-300 to-gray-400 text-xs font-semibold text-white ring-1 ring-gray-200 transition-all hover:z-10 hover:ring-2 hover:ring-blue-500 dark:border-dark-secondary dark:from-gray-600 dark:to-gray-700 dark:ring-gray-700\"\n                            >\n                              {(() => {\n                                if (user.name) {\n                                  const names = user.name.trim().split(\" \").filter(Boolean);\n                                  if (names.length >= 2) {\n                                    return `${names[0][0]}${names[names.length - 1][0]}`.toUpperCase();\n                                  }\n                                  if (names.length === 1 && names[0].length > 0) {\n                                    return names[0][0].toUpperCase();\n                                  }\n                                }\n                                if (user.username) {\n                                  return user.username.substring(0, 2).toUpperCase();\n                                }\n                                return \"?\";\n                              })()}\n                            </button>\n                          );\n                        })}\n                      </div>\n\n                      <div className=\"flex items-center gap-3\">\n                        {numberOfAttachments > 0 && (\n                          <div className=\"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400\">\n                            <FileText size={14} />\n                            <span>{numberOfAttachments}</span>\n                          </div>\n                        )}\n                        {numberOfComments > 0 && (\n                          <div className=\"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400\">\n                            <MessageSquareMore size={14} />\n                            <span>{numberOfComments}</span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n\n      {/* Attachments */}\n      <div className=\"mb-8 rounded-lg bg-white p-6 shadow dark:bg-dark-secondary\">\n        <div className=\"mb-4 flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold dark:text-white\">Attachments</h3>\n          <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n            {attachments.length}{\" \"}\n            {attachments.length === 1 ? \"attachment\" : \"attachments\"}\n          </span>\n        </div>\n\n        {isAttachmentsLoading ? (\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">Loading attachments...</p>\n        ) : attachments.length === 0 ? (\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">No attachments yet.</p>\n        ) : (\n          <div className=\"space-y-3\">\n            {attachments.map((attachment: Attachment) => {\n              const isOwnAttachment = authUser?.id === attachment.uploadedByUserId;\n              const uploaderName =\n                attachment.uploadedByUser?.name ||\n                attachment.uploadedByUser?.username ||\n                `User ${attachment.uploadedByUserId}`;\n              const formattedDate = format(new Date(attachment.dateAttached), \"PPpp\");\n              const fileUrl = attachment.fileUrl.startsWith('http') \n                ? attachment.fileUrl \n                : `/images/${attachment.fileUrl}`;\n\n              return (\n                <div\n                  key={attachment.id}\n                  className=\"flex items-center justify-between rounded-md border border-gray-200 p-4 dark:border-gray-700\"\n                >\n                  <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                    <div className=\"flex-shrink-0\">\n                      <svg\n                        className=\"h-8 w-8 text-gray-400 dark:text-gray-500\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth={2}\n                          d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\n                        />\n                      </svg>\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      {editingAttachmentId === attachment.id ? (\n                        <div className=\"space-y-2\">\n                          <div>\n                            <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              File Name\n                            </label>\n                            <input\n                              type=\"text\"\n                              className=\"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-gray-700 dark:bg-dark-secondary dark:text-white\"\n                              value={editingAttachmentFileName}\n                              onChange={(e) => setEditingAttachmentFileName(e.target.value)}\n                              placeholder=\"File name\"\n                            />\n                          </div>\n                          <div>\n                            <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              File URL\n                            </label>\n                            <input\n                              type=\"text\"\n                              className=\"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-gray-700 dark:bg-dark-secondary dark:text-white\"\n                              value={editingAttachmentFileUrl}\n                              onChange={(e) => setEditingAttachmentFileUrl(e.target.value)}\n                              placeholder=\"File URL\"\n                            />\n                          </div>\n                          <div className=\"flex gap-2\">\n                            <button\n                              className=\"rounded-md bg-blue-600 px-3 py-1 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-50\"\n                              onClick={handleSaveEditAttachment}\n                              disabled={isUpdatingAttachment || !editingAttachmentFileName.trim() || !editingAttachmentFileUrl.trim()}\n                            >\n                              Save\n                            </button>\n                            <button\n                              className=\"rounded-md border border-gray-300 px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700\"\n                              onClick={handleCancelEditAttachment}\n                            >\n                              Cancel\n                            </button>\n                          </div>\n                        </div>\n                      ) : (\n                        <>\n                          <a\n                            href={fileUrl}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"text-sm font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 truncate block\"\n                          >\n                            {attachment.fileName}\n                          </a>\n                          <div className=\"mt-1 flex items-center gap-2 text-xs text-gray-500 dark:text-neutral-400\">\n                            <span>Uploaded by {uploaderName}</span>\n                            <span>•</span>\n                            <span>{formattedDate}</span>\n                          </div>\n                        </>\n                      )}\n                    </div>\n                  </div>\n                  {editingAttachmentId !== attachment.id && (\n                    <div className=\"ml-4 flex items-center gap-2 flex-shrink-0\">\n                      {isOwnAttachment && (\n                        <>\n                          <button\n                            className=\"rounded-md border border-gray-300 px-2 py-1.5 text-xs text-gray-600 hover:bg-gray-100 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700\"\n                            onClick={() => handleStartEditAttachment(attachment)}\n                          >\n                            Edit\n                          </button>\n                          <button\n                            className=\"rounded-md border border-red-300 px-2 py-1.5 text-xs text-red-600 hover:bg-red-50 dark:border-red-700 dark:text-red-300 dark:hover:bg-red-900/30\"\n                            onClick={() => handleDeleteAttachment(attachment)}\n                            disabled={isDeletingAttachment}\n                          >\n                            Delete\n                          </button>\n                        </>\n                      )}\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        <div className=\"mt-6 border-t border-gray-200 pt-4 dark:border-gray-700\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white\">Add an attachment</h4>\n          {!authUser ? (\n            <p className=\"mt-2 text-sm text-gray-500 dark:text-neutral-400\">\n              Sign in to add attachments.\n            </p>\n          ) : (\n            <div className=\"mt-2 space-y-3\">\n              <div>\n                <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  File URL\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-gray-700 dark:bg-dark-secondary dark:text-white\"\n                  placeholder=\"https://example.com/file.pdf\"\n                  value={newAttachmentFileUrl}\n                  onChange={(e) => setNewAttachmentFileUrl(e.target.value)}\n                />\n              </div>\n              <div>\n                <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  File Name\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-gray-700 dark:bg-dark-secondary dark:text-white\"\n                  placeholder=\"document.pdf\"\n                  value={newAttachmentFileName}\n                  onChange={(e) => setNewAttachmentFileName(e.target.value)}\n                />\n              </div>\n              <div className=\"flex justify-end\">\n                <button\n                  className=\"rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-50\"\n                  onClick={handleSubmitAttachment}\n                  disabled={isCreatingAttachment || !newAttachmentFileUrl.trim() || !newAttachmentFileName.trim()}\n                >\n                  {isCreatingAttachment ? \"Adding...\" : \"Add Attachment\"}\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Comments */}\n      <div className=\"mb-8 rounded-lg bg-white p-6 shadow dark:bg-dark-secondary\">\n        <div className=\"mb-4 flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold dark:text-white\">Comments</h3>\n          <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n            {comments.length} {comments.length === 1 ? \"comment\" : \"comments\"}\n          </span>\n        </div>\n\n        {isCommentsLoading ? (\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">Loading comments...</p>\n        ) : comments.length === 0 ? (\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">No comments yet.</p>\n        ) : (\n          <div className=\"space-y-4\">\n            {comments.map((comment) => {\n              const isOwnComment = authUser?.id === comment.commenterUserId;\n              const commenterName =\n                comment.commenterUser?.name ||\n                comment.commenterUser?.username ||\n                `User ${comment.commenterUserId}`;\n              const formattedDate = format(new Date(comment.dateCommented), \"PPpp\");\n\n              return (\n                <div key={comment.id} className=\"rounded-md border border-gray-200 p-4 dark:border-gray-700\">\n                  <div className=\"flex flex-wrap items-center justify-between gap-2\">\n                    <div>\n                      <p className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">{commenterName}</p>\n                      <p className=\"text-xs text-gray-500 dark:text-neutral-400\">{formattedDate}</p>\n                    </div>\n                    {isOwnComment && (\n                      <div className=\"flex gap-2 text-xs\">\n                        <button\n                          className=\"rounded-md border border-gray-300 px-2 py-1 text-gray-600 hover:bg-gray-100 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700\"\n                          onClick={() => handleStartEdit(comment)}\n                        >\n                          Edit\n                        </button>\n                        <button\n                          className=\"rounded-md border border-red-300 px-2 py-1 text-red-600 hover:bg-red-50 dark:border-red-700 dark:text-red-300 dark:hover:bg-red-900/30\"\n                          onClick={() => handleDeleteComment(comment)}\n                          disabled={isDeletingComment}\n                        >\n                          Delete\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                  {editingCommentId === comment.id ? (\n                    <div className=\"mt-3 space-y-2\">\n                      <textarea\n                        className=\"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-gray-700 dark:bg-dark-secondary dark:text-white\"\n                        rows={3}\n                        value={editingCommentText}\n                        onChange={(e) => setEditingCommentText(e.target.value)}\n                      />\n                      <div className=\"flex gap-2\">\n                        <button\n                          className=\"rounded-md bg-blue-600 px-3 py-1 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-50\"\n                          onClick={handleSaveEdit}\n                          disabled={isUpdatingComment}\n                        >\n                          Save\n                        </button>\n                        <button\n                          className=\"rounded-md border border-gray-300 px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700\"\n                          onClick={handleCancelEdit}\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    </div>\n                  ) : (\n                    <p className=\"mt-3 whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-200\">\n                      {comment.text}\n                    </p>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        <div className=\"mt-6 border-t border-gray-200 pt-4 dark:border-gray-700\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white\">Add a comment</h4>\n          {!authUser ? (\n            <p className=\"mt-2 text-sm text-gray-500 dark:text-neutral-400\">\n              Sign in to add comments.\n            </p>\n          ) : (\n            <div className=\"mt-2 space-y-3\">\n              <textarea\n                className=\"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:border-gray-700 dark:bg-dark-secondary dark:text-white\"\n                rows={3}\n                placeholder=\"Share an update...\"\n                value={newCommentText}\n                onChange={(e) => setNewCommentText(e.target.value)}\n              />\n              <div className=\"flex justify-end\">\n                <button\n                  className=\"rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-50\"\n                  onClick={handleSubmitComment}\n                  disabled={isCreatingComment || !newCommentText.trim()}\n                >\n                  {isCreatingComment ? \"Posting...\" : \"Post Comment\"}\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WorkItemDetailPage;\n"],"names":[],"mappings":"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","debugId":null}}]
}