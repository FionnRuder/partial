{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/app/parts/ModalEditPart/index.tsx"],"sourcesContent":["\"use client\";\n\nimport Modal from \"@/components/Modal\";\nimport {  useEditPartMutation,\n          useDeletePartMutation,\n          useGetUsersQuery,\n          useGetProgramsQuery,\n          useGetPartsQuery,\n          PartState,\n          PartStateLabels\n} from \"@/state/api\";\nimport React, { useState, useEffect } from \"react\";\nimport { Part } from \"@/state/api\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n  part?: {\n    id: number;\n    code?: string;\n    partName?: string;\n    level?: number;\n    state?: PartState;\n    revisionLevel?: string;\n    assignedUserId?: string;\n    programId?: number;\n    parentId?: number | null;\n    } | null;\n};\n\nconst ModalEditPart = ({ isOpen, onClose, part }: Props) => {\n  const [editPart, { isLoading }] = useEditPartMutation();\n  const [deletePart, { isLoading: isDeleting }] = useDeletePartMutation();\n  const { data: users = [], isLoading: usersLoading } = useGetUsersQuery();\n  const { data: programs = [], isLoading: programsLoading } = useGetProgramsQuery();\n  const { data: parentParts = [], isLoading: partsLoading } = useGetPartsQuery();\n\n  const [partCode, setPartCode] = useState(\"\");\n  const [partName, setPartName] = useState(\"\");\n  const [level, setLevel] = useState(\"\");\n  const [state, setState] = useState<PartState | \"\">(\"\");\n  const [revisionLevel, setRevisionLevel] = useState(\"\");\n  const [assignedUserId, setAssignedUserId] = useState(\"\");\n  const [assignedUserName, setAssignedUserName] = useState(\"\");\n  const [programId, setProgramId] = useState(\"\");\n  const [programName, setProgramName] = useState(\"\");\n  const [parentId, setParentId] = useState(\"\");\n  const [parentPartName, setParentPartName] = useState(\"\");\n\n  // âœ… Auto-fill fields when modal opens or part changes\n  useEffect(() => {\n    if (part) {\n      setPartCode(part?.code || \"\");\n      setPartName(part?.partName || \"\");\n      setLevel(part?.level?.toString() || \"\");\n      setState(part?.state || \"\");\n      setRevisionLevel(part?.revisionLevel || \"\");\n      \n      setAssignedUserId(part?.assignedUserId?.toString() || \"\");\n      // prefill assignedUserName if part.assignedUserId is known\n      const assignedUser = users.find((u) => u.id === part.assignedUserId);\n      setAssignedUserName(assignedUser?.name || \"\");\n      \n      setProgramId(part?.programId?.toString() || \"\");\n      // Prefill program name if known\n      const program = programs.find((p) => p.id === part.programId);\n      setProgramName(program?.name || \"\");\n\n      setParentId(part?.parentId?.toString() || \"\");\n      // prefill assignedUserName if part.assignedUserId is known\n      const parentPart = parentParts.find((p) => p.id === part.parentId);\n      setParentPartName(parentPart?.partName || \"\");\n    }\n  }, [part, users, programs, parentParts]);\n\n  const handleSubmit = async () => {\n    if (!part) return;\n\n    await editPart({\n      partId: part.id,\n      updates: {\n        code: partCode,\n        partName,\n        level: Number(level),\n        state: state || undefined,\n        revisionLevel,\n        assignedUserId: assignedUserId,\n        programId: Number(programId),\n        parentId: parentId ? Number(parentId) : undefined,\n      },\n    });\n\n    onClose(); // close modal on success\n  };\n\n  const isFormValid = () =>\n    partCode && partName && level && state && revisionLevel && assignedUserId && programId;\n\n  const handleDelete = async () => {\n    if (!part) return;\n\n    const confirmed = window.confirm(\n        `Are you sure you want to delete \"${part.partName}\"? This action cannot be undone.`\n    );\n    if (!confirmed) return;\n\n    try {\n        await deletePart(part.id).unwrap();\n        onClose(); // close modal on success\n    } catch (err) {\n        console.error(\"Failed to delete part:\", err);\n    }\n  };\n\n  const inputStyles =\n    \"w-full rounded border border-gray-300 p-2 shadow-sm dark:border-dark-tertiary dark:bg-dark-tertiary dark:text-white dark:focus:outline-none\";\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} name=\"Edit Part\">\n      <form\n        className=\"mt-4 space-y-6\"\n        onSubmit={(e) => {\n          e.preventDefault();\n          handleSubmit();\n        }}\n      >\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Part Code:\n            </label>\n            <input\n                type=\"text\"\n                className={inputStyles}\n                placeholder=\"Part Code\"\n                value={partCode}\n                onChange={(e) => setPartCode(e.target.value)}\n            />\n        </div>\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Part Name:\n            </label>\n            <input\n                type=\"text\"\n                className={inputStyles}\n                placeholder=\"Part Name\"\n                value={partName}\n                onChange={(e) => setPartName(e.target.value)}\n            />\n        </div>\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Level:\n            </label>\n            <input\n                type=\"number\"\n                className={inputStyles}\n                placeholder=\"Level\"\n                value={level}\n                onChange={(e) => setLevel(e.target.value)}\n            />\n        </div>\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                State:\n            </label>\n            <select\n                className={inputStyles}\n                value={state}\n                onChange={(e) => setState(e.target.value as PartState)}\n            >\n                <option value=\"\">Select State</option>\n                {Object.values(PartState).map((stateValue) => (\n                    <option key={stateValue} value={stateValue}>\n                        {PartStateLabels[stateValue]}\n                    </option>\n                ))}\n            </select>\n        </div>\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Revision Level:\n            </label>\n            <input\n                type=\"text\"\n                className={inputStyles}\n                placeholder=\"Revision Level\"\n                value={revisionLevel}\n                onChange={(e) => setRevisionLevel(e.target.value)}\n            />\n        </div>\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Assignee:\n            </label>\n            <select\n              className={inputStyles}\n              value={assignedUserId}\n              onChange={(e) => {\n                setAssignedUserId(e.target.value);\n                const selected = users.find((u) => u.id === e.target.value);\n                setAssignedUserName(selected?.name || \"\");\n              }}\n              disabled={usersLoading}\n            >\n              <option value=\"\">Select Assigned User</option>\n              {users.map((user) => (\n                <option key={user.id} value={user.id}>\n                  {user.name} ({user.username})\n                </option>\n              ))}\n            </select>\n        </div>\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Program:\n            </label>\n            <select\n              className={inputStyles}\n              value={programId}\n              onChange={(e) => {\n                setProgramId(e.target.value);\n                const selected = programs.find((p) => p.id === Number(e.target.value));\n                setProgramName(selected?.name || \"\");\n              }}\n              disabled={programsLoading}\n            >\n              <option value=\"\">Select Program</option>\n              {programs.map((program) => (\n                <option key={program.id} value={program.id}>\n                  {program.name}\n                </option>\n              ))}\n            </select>\n        </div>\n        <div>\n            <label className=\"block text-sm text-gray-600 dark:text-gray-300\">\n                Parent Part:\n            </label>\n            <select\n              className={inputStyles}\n              value={parentId}\n              onChange={(e) => {\n                setParentId(e.target.value);\n                const selected = parentParts.find((p) => p.id === Number(e.target.value));\n                setParentPartName(selected?.partName || \"\");\n              }}\n              disabled={partsLoading}\n            >\n              <option value=\"\">Select Parent Part</option>\n              {parentParts.map((parentPart) => (\n                <option key={parentPart.id} value={parentPart.id}>\n                  {parentPart.code} - {parentPart.partName}\n                </option>\n              ))}\n            </select>\n        </div>\n\n        <button\n          type=\"submit\"\n          className={`focus-offset-2 mt-4 flex w-full justify-center rounded-md border border-transparent bg-blue-primary px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600 ${\n            !isFormValid() || isLoading ? \"cursor-not-allowed opacity-50\" : \"\"\n          }`}\n          disabled={!isFormValid() || isLoading}\n        >\n          {isLoading ? \"Updating...\" : \"Update Part\"}\n        </button>\n        <button\n            type=\"button\"\n            onClick={handleDelete}\n            className={`focus-offset-2 mt-4 flex w-full justify-center rounded-md border border-transparent bg-red-500 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 ${\n                isDeleting ? \"cursor-not-allowed opacity-50\" : \"\"\n            }`}\n            disabled={isDeleting}\n        >\n            {isDeleting ? `Deleting Part` : `Delete Part`}\n        </button>\n      </form>\n    </Modal>\n  );\n};\n\nexport default ModalEditPart;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 444, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/app/parts/ModalNewPart/index.tsx"],"sourcesContent":["import Modal from '@/components/Modal';\nimport { useCreatePartMutation, useGetUsersQuery, useGetProgramsQuery, useGetPartsQuery, PartState, PartStateLabels } from '@/state/api';\nimport React, { useState } from 'react';\n//import { formatISO } from 'date-fns';\n\ntype Props = {\n    isOpen: boolean;\n    onClose: () => void;\n};\n\nconst ModalNewPart = ({isOpen, onClose}: Props) => {\n    const { data: users = [], isLoading: usersLoading } = useGetUsersQuery();\n    const { data: programs = [], isLoading: programsLoading } = useGetProgramsQuery();\n    const { data: parts = [], isLoading: partsLoading } = useGetPartsQuery();\n    const [createPart, {isLoading}] = useCreatePartMutation();\n    const [partCode, setPartCode] = useState(\"\");\n    const [partName, setPartName] = useState(\"\");\n    const [level, setLevel] = useState(\"\");\n    const [state, setState] = useState<PartState | \"\">(\"\");\n    const [revisionLevel, setRevisionLevel] = useState(\"\");\n    const [assignedUserId, setAssignedUserId] = useState(\"\");\n    const [programId, setProgramId] = useState(\"\");\n    const [parentId, setParentId] = useState(\"\");\n    //const [startDate, setStartDate] = useState(\"\");\n    //const [endDate, setEndDate] = useState(\"\");\n\n    const handleSubmit = async () => {\n        if (!partCode || !partName || !level || !state || !revisionLevel || !assignedUserId || !programId) return;\n\n        //const formattedStartDate = formatISO(new Date(startDate), { representation: 'complete'});\n        //const formattedEndDate = formatISO(new Date(endDate), { representation: 'complete'});\n\n        await createPart({\n            code: partCode,\n            partName,\n            level: Number(level),\n            state,\n            revisionLevel,\n            assignedUserId: assignedUserId,\n            programId: Number(programId),\n            parentId: parentId ? Number(parentId) : undefined,\n            //startDate: formattedStartDate,\n            //endDate: formattedEndDate\n        });\n    };\n\n    const isFormValid = () => {\n        return partCode && partName && level && state && revisionLevel && assignedUserId && programId;\n    };\n\n    const inputStyles = \"w-full rounded border border-gray-300 p-2 shadow-sm dark:border-dark-tertiary dark:bg-dark-tertiary dark:text-white dark:focus:outline-none\"\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} name=\"Create New Part\">\n            <form \n                className=\"mt-4 space-y-6\"\n                onSubmit={(e) => {\n                    e.preventDefault();\n                    handleSubmit();\n                }}\n            >\n                <input\n                    type=\"text\"\n                    className={inputStyles}\n                    placeholder=\"Part Code\"\n                    value={partCode}\n                    onChange={(e) => setPartCode(e.target.value)}\n                />\n                <input\n                    type=\"text\"\n                    className={inputStyles}\n                    placeholder=\"Part Name\"\n                    value={partName}\n                    onChange={(e) => setPartName(e.target.value)}\n                />\n                <input\n                    type=\"number\"\n                    className={inputStyles}\n                    placeholder=\"Level\"\n                    value={level}\n                    onChange={(e) => setLevel(e.target.value)}\n                />\n                <select\n                    className={inputStyles}\n                    value={state}\n                    onChange={(e) => setState(e.target.value as PartState)}\n                >\n                    <option value=\"\">Select State</option>\n                    {Object.values(PartState).map((stateValue) => (\n                        <option key={stateValue} value={stateValue}>\n                            {PartStateLabels[stateValue]}\n                        </option>\n                    ))}\n                </select>\n                <input\n                    type=\"text\"\n                    className={inputStyles}\n                    placeholder=\"Revision Level\"\n                    value={revisionLevel}\n                    onChange={(e) => setRevisionLevel(e.target.value)}\n                />\n                <select\n                    className={inputStyles}\n                    value={assignedUserId}\n                    onChange={(e) => setAssignedUserId(e.target.value)}\n                    disabled={usersLoading}\n                >\n                    <option value=\"\">Select Assigned User</option>\n                    {users.map((user) => (\n                        <option key={user.id} value={user.id}>\n                        {user.name} ({user.username})\n                        </option>\n                    ))}\n                </select>\n                <select\n                    className={inputStyles}\n                    value={programId}\n                    onChange={(e) => setProgramId(e.target.value)}\n                    disabled={programsLoading}\n                >\n                    <option value=\"\">Select Program</option>\n                    {programs.map((program) => (\n                        <option key={program.id} value={program.id}>\n                        {program.name}\n                        </option>\n                    ))}\n                </select>\n                <select\n                    className={inputStyles}\n                    value={parentId}\n                    onChange={(e) => setParentId(e.target.value)}\n                    disabled={partsLoading}\n                >\n                    <option value=\"\">Select Parent Part</option>\n                    {parts.map((part) => (\n                        <option key={part.id} value={part.id}>\n                        {part.code} - {part.partName}\n                        </option>\n                    ))}\n                </select>\n                {/* <textarea\n                    className={inputStyles}\n                    placeholder=\"Description\"\n                    value={description}\n                    onChange={(e) => setDescription(e.target.value)}\n                />\n                <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2 sm:gap-2\">\n                    <input\n                        type=\"date\"\n                        className={inputStyles}\n                        value={startDate}\n                        onChange={(e) => setStartDate(e.target.value)}\n                    />\n                    <input\n                        type=\"date\"\n                        className={inputStyles}\n                        value={endDate}\n                        onChange={(e) => setEndDate(e.target.value)}\n                    />\n                </div> */}\n                <button\n                    type=\"submit\"\n                    className={`focus-offset-2 mt-4 flex w-full justify-center rounded-md border border-transparent bg-blue-primary px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600 ${\n                        !isFormValid() || isLoading ? \"cursor-not-allowed opacity-50\" : \"\"\n                    }`}\n                    disabled={!isFormValid() || isLoading}\n                >\n                    {isLoading ? \"Creating...\" : \"Create Part\"}\n                </button>\n            </form>\n        </Modal>\n    )\n};\n\nexport default ModalNewPart;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 692, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/frude/Documents/startup/Partial/code/client/src/app/part-hierarchy/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport { useGetPartsQuery, useGetProgramsQuery, WorkItemType } from '@/state/api';\nimport { Part, Program, WorkItem } from '@/state/api';\nimport { ChevronDown, ChevronRight, Bolt, User, Layers, FileText, AlertTriangle, CheckSquare, Edit, PlusSquare } from 'lucide-react';\nimport { useRouter } from 'next/navigation';\nimport ModalEditPart from '@/app/parts/ModalEditPart';\nimport ModalNewPart from '@/app/parts/ModalNewPart';\nimport Header from '@/components/Header';\n\ninterface PartHierarchyNode extends Part {\n  children?: PartHierarchyNode[];\n  isExpanded?: boolean;\n}\n\ninterface WorkItemCounts {\n  deliverables: number;\n  issues: number;\n  tasks: number;\n  total: number;\n}\n\n// Custom hook to manage work item data for all parts\nconst useWorkItemData = (partsOrTree: Part[] | PartHierarchyNode[], programId: number | null) => {\n  const [workItemData, setWorkItemData] = useState<Map<number, WorkItem[]>>(new Map());\n  const [loadingParts, setLoadingParts] = useState<Set<number>>(new Set());\n  const fetchedPartsRef = React.useRef<Set<number>>(new Set());\n  const allWorkItemsRef = React.useRef<WorkItem[]>([]);\n\n  // Fetch all work items for the program once (more efficient than per-part requests)\n  const fetchAllWorkItemsForProgram = useCallback(async (programId: number) => {\n    try {\n      const headers: HeadersInit = {};\n      if (typeof window !== 'undefined') {\n        const storedUser = window.localStorage.getItem('authUser');\n        if (storedUser) {\n          try {\n            const parsedUser = JSON.parse(storedUser);\n            if (parsedUser?.id) {\n              headers['x-user-id'] = String(parsedUser.id);\n            }\n          } catch (error) {\n            console.warn('Failed to parse authUser from localStorage', error);\n          }\n        }\n      }\n\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/workItems?programId=${programId}`, {\n        headers,\n        credentials: 'include',\n      });\n      \n      if (response.status === 429) {\n        // Rate limited - wait and retry\n        const retryAfter = response.headers.get('Retry-After') || '30';\n        const waitTime = parseInt(retryAfter, 10) * 1000;\n        console.warn(`Rate limited. Retrying after ${waitTime}ms...`);\n        await new Promise(resolve => setTimeout(resolve, waitTime));\n        return fetchAllWorkItemsForProgram(programId);\n      }\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      const workItems = await response.json();\n      const workItemsArray = Array.isArray(workItems) ? workItems : [];\n      allWorkItemsRef.current = workItemsArray;\n      console.log(`Fetched ${workItemsArray.length} work items for program ${programId}`);\n      \n      // Group work items by partId\n      const workItemsByPart = new Map<number, WorkItem[]>();\n      workItemsArray.forEach(workItem => {\n        if (workItem.partNumbers && Array.isArray(workItem.partNumbers)) {\n          workItem.partNumbers.forEach((partLink: any) => {\n            const partId = partLink.part?.id || partLink.partId;\n            if (partId) {\n              if (!workItemsByPart.has(partId)) {\n                workItemsByPart.set(partId, []);\n              }\n              workItemsByPart.get(partId)!.push(workItem);\n            }\n          });\n        }\n      });\n      \n      setWorkItemData(workItemsByPart);\n    } catch (error) {\n      console.error(`Failed to fetch work items for program ${programId}:`, error);\n      setWorkItemData(new Map());\n    }\n  }, []);\n\n  // Fetch work items for a specific part (fallback if program fetch fails)\n  const fetchWorkItemsForPart = useCallback(async (partId: number, retryCount = 0) => {\n    const maxRetries = 3;\n    \n    setLoadingParts(prev => {\n      if (prev.has(partId)) return prev;\n      return new Set(prev).add(partId);\n    });\n    \n    try {\n      const headers: HeadersInit = {};\n      if (typeof window !== 'undefined') {\n        const storedUser = window.localStorage.getItem('authUser');\n        if (storedUser) {\n          try {\n            const parsedUser = JSON.parse(storedUser);\n            if (parsedUser?.id) {\n              headers['x-user-id'] = String(parsedUser.id);\n            }\n          } catch (error) {\n            console.warn('Failed to parse authUser from localStorage', error);\n          }\n        }\n      }\n\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/workItems?partId=${partId}`, {\n        headers,\n        credentials: 'include',\n      });\n      \n      if (response.status === 429) {\n        if (retryCount < maxRetries) {\n          const retryAfter = response.headers.get('Retry-After') || '30';\n          const waitTime = parseInt(retryAfter, 10) * 1000;\n          console.warn(`Rate limited for part ${partId}. Retrying after ${waitTime}ms... (attempt ${retryCount + 1}/${maxRetries})`);\n          await new Promise(resolve => setTimeout(resolve, waitTime));\n          return fetchWorkItemsForPart(partId, retryCount + 1);\n        } else {\n          throw new Error(`Rate limited after ${maxRetries} retries`);\n        }\n      }\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      const workItems = await response.json();\n      const workItemsArray = Array.isArray(workItems) ? workItems : [];\n      console.log(`Fetched ${workItemsArray.length} work items for part ${partId}:`, workItemsArray);\n      setWorkItemData(prev => {\n        const newMap = new Map(prev);\n        newMap.set(partId, workItemsArray);\n        return newMap;\n      });\n    } catch (error) {\n      console.error(`Failed to fetch work items for part ${partId}:`, error);\n      setWorkItemData(prev => {\n        const newMap = new Map(prev);\n        newMap.set(partId, []);\n        return newMap;\n      });\n    } finally {\n      setLoadingParts(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(partId);\n        return newSet;\n      });\n    }\n  }, []);\n\n  // Collect all part IDs from the hierarchy\n  const allPartIds = useMemo(() => {\n    const ids = new Set<number>();\n    const collectPartIds = (partList: (Part | PartHierarchyNode)[]) => {\n      partList.forEach(part => {\n        ids.add(part.id);\n        if ('children' in part && part.children) {\n          collectPartIds(part.children);\n        }\n      });\n    };\n    collectPartIds(partsOrTree);\n    return Array.from(ids).sort().join(',');\n  }, [partsOrTree]);\n\n  // Fetch all work items for the program when programId changes\n  useEffect(() => {\n    if (programId) {\n      fetchAllWorkItemsForProgram(programId);\n    } else {\n      setWorkItemData(new Map());\n      allWorkItemsRef.current = [];\n    }\n  }, [programId, fetchAllWorkItemsForProgram]);\n\n  return { workItemData, loadingParts };\n};\n\n// Component to display work item counts for a part\nconst PartWorkItemCounts = ({\n  partId,\n  children,\n  isExpanded,\n  workItemData,\n}: {\n  partId: number;\n  children?: PartHierarchyNode[];\n  isExpanded: boolean;\n  workItemData: Map<number, WorkItem[]>;\n}) => {\n  const workItems = workItemData.get(partId);\n  // Ensure workItems is always an array\n  const workItemsArray = Array.isArray(workItems) ? workItems : [];\n\n  // Get direct work item counts for this part\n  const directCounts = useMemo((): WorkItemCounts => {\n    const deliverables = workItemsArray.filter(item => item.workItemType === WorkItemType.Deliverable).length;\n    const issues = workItemsArray.filter(item => item.workItemType === WorkItemType.Issue).length;\n    const tasks = workItemsArray.filter(item => item.workItemType === WorkItemType.Task).length;\n    const total = workItemsArray.length;\n\n    return { deliverables, issues, tasks, total };\n  }, [workItemsArray]);\n\n  // Recursively calculate children's work item counts\n  const calculateChildrenCounts = (childNodes: PartHierarchyNode[]): WorkItemCounts => {\n    return childNodes.reduce((acc, child) => {\n      const childWorkItems = workItemData.get(child.id);\n      // Ensure childWorkItems is always an array\n      const childWorkItemsArray = Array.isArray(childWorkItems) ? childWorkItems : [];\n      const childDirectCounts = {\n        deliverables: childWorkItemsArray.filter(item => item.workItemType === WorkItemType.Deliverable).length,\n        issues: childWorkItemsArray.filter(item => item.workItemType === WorkItemType.Issue).length,\n        tasks: childWorkItemsArray.filter(item => item.workItemType === WorkItemType.Task).length,\n        total: childWorkItemsArray.length,\n      };\n\n      // Recursively get children's children counts\n      const grandChildrenCounts = child.children ? calculateChildrenCounts(child.children) : { deliverables: 0, issues: 0, tasks: 0, total: 0 };\n\n      return {\n        deliverables: acc.deliverables + childDirectCounts.deliverables + grandChildrenCounts.deliverables,\n        issues: acc.issues + childDirectCounts.issues + grandChildrenCounts.issues,\n        tasks: acc.tasks + childDirectCounts.tasks + grandChildrenCounts.tasks,\n        total: acc.total + childDirectCounts.total + grandChildrenCounts.total,\n      };\n    }, { deliverables: 0, issues: 0, tasks: 0, total: 0 });\n  };\n\n  const childrenCounts = useMemo((): WorkItemCounts => {\n    if (!children || children.length === 0) {\n      return { deliverables: 0, issues: 0, tasks: 0, total: 0 };\n    }\n    return calculateChildrenCounts(children);\n  }, [children, workItemData]);\n\n  // Determine which counts to display based on expansion state\n  const displayCounts = useMemo(() => {\n    const hasChildren = children && children.length > 0;\n    \n    if (isExpanded || !hasChildren) {\n      // When expanded OR when it's a leaf node (no children), show only direct work items\n      return directCounts;\n    } else {\n      // When collapsed AND has children, show total including children\n      return {\n        deliverables: directCounts.deliverables + childrenCounts.deliverables,\n        issues: directCounts.issues + childrenCounts.issues,\n        tasks: directCounts.tasks + childrenCounts.tasks,\n        total: directCounts.total + childrenCounts.total,\n      };\n    }\n  }, [isExpanded, directCounts, childrenCounts, children]);\n\n  return (\n    <div className=\"flex flex-wrap items-center gap-3\">\n      <span className=\"inline-flex items-center gap-1 text-sm font-medium text-blue-600 dark:text-blue-400\">\n        <FileText className=\"h-3 w-3\" />\n        Deliverables: {displayCounts.deliverables}\n      </span>\n      <span className=\"inline-flex items-center gap-1 text-sm font-medium text-orange-600 dark:text-orange-400\">\n        <AlertTriangle className=\"h-3 w-3\" />\n        Issues: {displayCounts.issues}\n      </span>\n      <span className=\"inline-flex items-center gap-1 text-sm font-medium text-green-600 dark:text-green-400\">\n        <CheckSquare className=\"h-3 w-3\" />\n        Tasks: {displayCounts.tasks}\n      </span>\n      <span className=\"inline-flex items-center gap-1 text-sm text-gray-500 dark:text-gray-400\">\n        Total: {displayCounts.total}\n        {isExpanded || !children || children.length === 0 ? \" (direct)\" : \" (including children)\"}\n      </span>\n    </div>\n  );\n};\n\nconst PartHierarchyPage = () => {\n  const router = useRouter();\n  const { data: allParts = [], isLoading, error } = useGetPartsQuery();\n  const { data: programs = [] } = useGetProgramsQuery();\n  const [expandedNodes, setExpandedNodes] = useState<Set<number>>(new Set());\n  const [selectedProgramId, setSelectedProgramId] = useState<number | null>(null);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [selectedPartForEdit, setSelectedPartForEdit] = useState<Part | null>(null);\n  const [isNewPartModalOpen, setIsNewPartModalOpen] = useState(false);\n\n  // Auto-select the first program when programs are loaded\n  useEffect(() => {\n    if (programs.length > 0 && selectedProgramId === null) {\n      setSelectedProgramId(programs[0].id);\n    }\n  }, [programs, selectedProgramId]);\n\n  // Filter parts by selected program\n  const filteredParts = useMemo(() => {\n    if (!selectedProgramId) return [];\n    return allParts.filter(part => part.programId === selectedProgramId);\n  }, [allParts, selectedProgramId]);\n\n  // Build hierarchical tree structure\n  const hierarchyTree = useMemo(() => {\n    if (!filteredParts.length) return [];\n\n    // Create a map for quick lookup\n    const partMap = new Map<number, PartHierarchyNode>();\n    filteredParts.forEach(part => {\n      partMap.set(part.id, { ...part, children: [] });\n    });\n\n    // Build the tree\n    const rootNodes: PartHierarchyNode[] = [];\n    filteredParts.forEach(part => {\n      const node = partMap.get(part.id)!;\n      if (part.parentId && partMap.has(part.parentId)) {\n        const parent = partMap.get(part.parentId)!;\n        parent.children!.push(node);\n      } else {\n        rootNodes.push(node);\n      }\n    });\n\n    // Sort children by part code\n    const sortChildren = (nodes: PartHierarchyNode[]) => {\n      nodes.sort((a, b) => a.code.localeCompare(b.code, undefined, { numeric: true, sensitivity: \"base\" }));\n      nodes.forEach(node => {\n        if (node.children && node.children.length > 0) {\n          sortChildren(node.children);\n        }\n      });\n    };\n\n    sortChildren(rootNodes);\n    return rootNodes;\n  }, [filteredParts]);\n\n  // Use the work item data hook with the hierarchy tree and programId\n  const { workItemData } = useWorkItemData(hierarchyTree, selectedProgramId);\n\n  const toggleNode = (nodeId: number) => {\n    setExpandedNodes(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(nodeId)) {\n        newSet.delete(nodeId);\n      } else {\n        newSet.add(nodeId);\n      }\n      return newSet;\n    });\n  };\n\n  const handleEditPart = (part: Part, e: React.MouseEvent) => {\n    e.stopPropagation(); // Prevent triggering the row click\n    setSelectedPartForEdit(part);\n    setIsEditModalOpen(true);\n  };\n\n  const renderNode = (node: PartHierarchyNode, depth: number = 0) => {\n    const hasChildren = node.children && node.children.length > 0;\n    const isExpanded = expandedNodes.has(node.id);\n    const indentClass = `ml-${depth * 4}`;\n\n    return (\n      <div key={node.id} className=\"select-none\">\n        <div\n          className={`flex flex-wrap items-center gap-x-4 gap-y-2 py-2 px-4 hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer border-l-2 border-transparent hover:border-blue-200 transition-colors ${indentClass}`}\n          style={{ marginLeft: `${depth * 20}px` }}\n          onClick={() => router.push(`/parts/${node.id}`)}\n        >\n          {/* Expand/Collapse Button */}\n          <div className=\"w-6 flex justify-center\">\n            {hasChildren ? (\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  toggleNode(node.id);\n                }}\n                className=\"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors\"\n              >\n                {isExpanded ? (\n                  <ChevronDown className=\"h-4 w-4 text-gray-600 dark:text-gray-400\" />\n                ) : (\n                  <ChevronRight className=\"h-4 w-4 text-gray-600 dark:text-gray-400\" />\n                )}\n              </button>\n            ) : (\n              <div className=\"w-4\" />\n            )}\n          </div>\n\n          {/* Part Icon */}\n          <Bolt className=\"h-5 w-5 text-gray-600 dark:text-gray-400 flex-shrink-0\" />\n\n          {/* Part Information */}\n          <div className=\"flex-1 min-w-0 flex flex-col gap-2\">\n            <div className=\"flex flex-wrap items-center gap-3 text-sm\">\n              <span className=\"font-semibold text-gray-900 dark:text-white\">\n                {node.partName}\n              </span>\n              <span className=\"text-gray-700 dark:text-gray-300 truncate\">\n                ({node.code})\n              </span>\n            </div>\n\n            {/* Additional Info */}\n            <div className=\"flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-gray-500 dark:text-gray-400\">\n              <span className=\"flex items-center gap-1\">\n                <User className=\"h-3 w-3\" />\n                {node.assignedUser?.name || 'Unassigned'}\n              </span>\n              <span className=\"flex items-center gap-1\">\n                <Layers className=\"h-3 w-3\" />\n                Level {node.level}\n              </span>\n              <span\n                className={`px-2 py-1 rounded-full text-xs font-medium ${\n                  node.state === 'Released'\n                    ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n                    : node.state === 'UnderReview'\n                      ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\n                      : node.state === 'InWork'\n                        ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'\n                        : 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200'\n                }`}\n              >\n                {node.state}\n              </span>\n            </div>\n\n            {/* Work Item Counts */}\n            <PartWorkItemCounts\n              partId={node.id}\n              children={node.children}\n              isExpanded={isExpanded}\n              workItemData={workItemData}\n            />\n          </div>\n\n          {/* Edit Icon */}\n          <div className=\"flex-shrink-0\">\n            <button\n              onClick={(e) => handleEditPart(node, e)}\n              className=\"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors\"\n              title=\"Edit Part\"\n            >\n              <Edit className=\"h-4 w-4 text-gray-600 dark:text-gray-400\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Render Children */}\n        {hasChildren && isExpanded && (\n          <div>\n            {node.children!.map(child => renderNode(child, depth + 1))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"p-8\">\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"text-gray-500 dark:text-gray-400\">Loading part hierarchy...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-8\">\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"text-red-500\">Error loading part hierarchy. Please try again.</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <Header \n            name=\"Part Hierarchy\"\n            buttonComponent={\n              <button\n                className=\"flex items-center rounded-md bg-blue-primary px-3 py-2 text-white hover:bg-blue-600 transition-colors\"\n                onClick={() => setIsNewPartModalOpen(true)}\n              >\n                <PlusSquare className=\"mr-2 h-5 w-5\" />\n                New Part\n              </button>\n            }\n          />\n          <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\n            View and navigate the hierarchical structure of all parts in the system\n          </p>\n        </div>\n\n        {/* Controls */}\n        <div className=\"mb-6 space-y-4\">\n          {/* Program Filter */}\n          <div className=\"flex items-center gap-4\">\n            <label htmlFor=\"program-select\" className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n              Select a Program:\n            </label>\n            <select\n              id=\"program-select\"\n              value={selectedProgramId || ''}\n              onChange={(e) => {\n                const programId = Number(e.target.value);\n                setSelectedProgramId(programId);\n                // Clear expanded nodes when changing program filter\n                setExpandedNodes(new Set());\n              }}\n              className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent min-w-[200px]\"\n            >\n              {programs.map((program) => (\n                <option key={program.id} value={program.id}>\n                  {program.name}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Tree Controls */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={() => {\n                  // Expand all nodes\n                  const allNodeIds = new Set<number>();\n                  const collectIds = (nodes: PartHierarchyNode[]) => {\n                    nodes.forEach(node => {\n                      if (node.children && node.children.length > 0) {\n                        allNodeIds.add(node.id);\n                        collectIds(node.children);\n                      }\n                    });\n                  };\n                  collectIds(hierarchyTree);\n                  setExpandedNodes(allNodeIds);\n                }}\n                className=\"px-4 py-2 bg-blue-primary text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium\"\n              >\n                Expand All\n              </button>\n              <button\n                onClick={() => setExpandedNodes(new Set())}\n                className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium\"\n              >\n                Collapse All\n              </button>\n            </div>\n            \n            <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n              {selectedProgramId ? (\n                <>\n                  {filteredParts.length} parts in {programs.find(p => p.id === selectedProgramId)?.name}\n                </>\n              ) : (\n                'Select a program to view parts'\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Hierarchy Tree */}\n        <div className=\"bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm\">\n          {hierarchyTree.length === 0 ? (\n            <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\n              No parts found for the selected program.\n              <br />\n              <span className=\"text-sm\">Try selecting a different program from the dropdown above.</span>\n            </div>\n          ) : (\n            <div className=\"divide-y divide-gray-100 dark:divide-gray-800\">\n              {hierarchyTree.map(node => renderNode(node))}\n            </div>\n          )}\n        </div>\n\n        {/* Edit Part Modal */}\n        <ModalEditPart\n          isOpen={isEditModalOpen}\n          onClose={() => {\n            setIsEditModalOpen(false);\n            setSelectedPartForEdit(null);\n          }}\n          part={selectedPartForEdit}\n        />\n\n        {/* New Part Modal */}\n        <ModalNewPart\n          isOpen={isNewPartModalOpen}\n          onClose={() => setIsNewPartModalOpen(false)}\n        />\n    </div>\n  );\n};\n\nexport default PartHierarchyPage;\n"],"names":[],"mappings":"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","debugId":null}}]
}